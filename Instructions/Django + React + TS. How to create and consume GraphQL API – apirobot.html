<!DOCTYPE html>
<!-- saved from url=(0079)https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api -->
<html lang="en-US" class="no-featured-area is-body-full-width is-single-post-title-with-margins is-post-title-align-center is-post-media-fixed is-blog-text-align-center is-meta-with-none is-menu-full is-menu-sticky is-sidebar-right is-sidebar-sticky is-sidebar-align-left is-widget-title-align-left is-widget-first-letter-border is-trending-posts-default is-footer-subscribe-light is-footer-widgets-align-left is-footer-full-width is-header-small is-header-light is-header-full-width is-header-parallax-no is-menu-align-center is-menu-light is-submenu-dark is-submenu-align-center is-menu-uppercase is-featured-area-full is-slider-buttons-center-margin is-slider-buttons-sharp-edges is-slider-buttons-border is-slider-title-default is-slider-parallax-no is-slider-title-none-uppercase is-slider-more-link-show is-slider-more-link-button-style is-slider-text-align-center is-slider-v-align-center is-slider-h-align-center is-link-box-title-default is-link-box-title-transform-none is-link-box-text-align-center is-link-box-v-align-center is-link-box-parallax-no is-intro-align-center is-intro-text-dark is-intro-parallax-no is-more-link-button-style is-about-author-minimal is-related-posts-parallax-no is-related-posts-fixed is-share-links-border is-tagcloud-minimal is-nav-single-rounded is-nav-single-no-animated is-comments-minimal is-comments-image-rounded is-comment-form-boxed is-comment-form-border-arrow loaded" data-title-ratio="0.6" data-link-box-title-ratio="0.5"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<meta name="viewport" content="width=device-width, initial-scale=1">
				<link rel="profile" href="http://gmpg.org/xfn/11">
	<title>Django + React + TS. How to create and consume GraphQL API – apirobot</title>
<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch" href="https://secure.gravatar.com/">
<link rel="dns-prefetch" href="https://fonts.googleapis.com/">
<link rel="dns-prefetch" href="https://s.w.org/">
<link rel="dns-prefetch" href="https://v0.wordpress.com/">
<link rel="alternate" type="application/rss+xml" title="apirobot » Feed" href="https://apirobot.me/feed">
<link rel="alternate" type="application/rss+xml" title="apirobot » Comments Feed" href="https://apirobot.me/comments/feed">
<link rel="alternate" type="application/rss+xml" title="apirobot » Django + React + TS. How to create and consume GraphQL API Comments Feed" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api/feed">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/apirobot.me\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.7.8"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/wp-emoji-release.min.js" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" id="selection-sharer-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/selection-sharer.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-block-library-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/style.min.css" type="text/css" media="all">
<style id="wp-block-library-inline-css" type="text/css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="mediaelement-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/mediaelementplayer-legacy.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-mediaelement-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/wp-mediaelement.min.css" type="text/css" media="all">
<link rel="stylesheet" id="titan-adminbar-styles-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/admin-bar.css" type="text/css" media="all">
<link rel="stylesheet" id="contact-form-7-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/styles.css" type="text/css" media="all">
<link rel="stylesheet" id="fontello-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/fontello.css" type="text/css" media="all">
<link rel="stylesheet" id="theblogger-shortcodes-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/shortcodes.css" type="text/css" media="all">
<link rel="stylesheet" id="theblogger-fonts-css" href="https://fonts.googleapis.com/css?family=Comfortaa%3A400%2C400i%2C700%2C700i%7CMontserrat%3A400%2C400i%2C700%2C700i%7CRokkitt%3A400%2C400i%2C700%2C700i&amp;ver=5.7.8" type="text/css" media="all">
<link rel="stylesheet" id="normalize-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/normalize.css" type="text/css" media="all">
<link rel="stylesheet" id="bootstrap-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/bootstrap.css" type="text/css" media="all">
<link rel="stylesheet" id="fluidbox-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/fluidbox.css" type="text/css" media="all">
<link rel="stylesheet" id="magnific-popup-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/magnific-popup.css" type="text/css" media="all">
<link rel="stylesheet" id="owl-carousel-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/owl.carousel.css" type="text/css" media="all">
<link rel="stylesheet" id="theblogger-main-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/main.css" type="text/css" media="all">
<link rel="stylesheet" id="theblogger-768-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/768.css" type="text/css" media="all">
<link rel="stylesheet" id="theblogger-992-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/992.css" type="text/css" media="all">
<link rel="stylesheet" id="theblogger-style-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/style.css" type="text/css" media="all">
<link rel="stylesheet" id="theblogger-main-style-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/style(1).css" type="text/css" media="all">
<style id="theblogger-main-style-inline-css" type="text/css">
.site-title { font-family: 'Comfortaa'; }

.nav-menu, .entry-meta, .owl-nav, .more-link, label, input[type=submit], input[type=button], button, .button, .page-links, .navigation, .entry-title i, .site-info, .filters { font-family: 'Montserrat'; }

.widget-title { font-family: 'Montserrat'; }

h1, .entry-title, .footer-subscribe h3, .widget_categories ul li, .widget_recent_entries ul li a, .widget_pages ul li, .widget_nav_menu ul li, .widget_archive ul li, .widget_most_recommended_posts ul li a, .widget_calendar table caption, .tptn_title, .nav-single a, .widget_recent_comments ul li, .widget_product_categories ul li, .widget_meta ul li, .widget_rss ul a.rsswidget { font-family: 'Montserrat'; }

h2, h3, h4, h5, h6, blockquote, .tab-titles { font-family: 'Montserrat'; }

.slider-box .entry-title { font-family: 'Rokkitt'; }

body, input, textarea, select, button { font-family: 'Montserrat'; }

.link-box .entry-title { font-family: 'Rokkitt'; }

@media screen and (min-width: 992px) { .blog-small .entry-title { font-size: 26px; } }

@media screen and (min-width: 992px) { h1 { font-size: 66px; } }

@media screen and (min-width: 992px) { html { font-size: 18px; } }

@media screen and (min-width: 992px) { .blog-stream .entry-content { font-size: 16px; } }

@media screen and (min-width: 992px) { .nav-menu ul ul { font-size: 10px; } }

h1, .entry-title, .footer-subscribe h3 { font-weight: 400; }

h2, h3, h4, h5, h6, blockquote, .comment-meta .fn { font-weight: 400; }

@media screen and (min-width: 992px) { .slider-box .entry-title { letter-spacing: 3px; } }

h1, .entry-title, .footer-subscribe h3, .widget_categories ul li, .widget_recent_entries ul li, .widget_pages ul li, .widget_archive ul li, .widget_calendar table caption, .tptn_title, .nav-single a { text-transform: none; }

@media screen and (min-width: 992px) { .site-branding { padding: 80px 0; } }

@media screen and (min-width: 992px) { .intro { padding: 50px 0; } }

.header-wrap:before { opacity: 0.4; }

body { color: #373737; }

.site .footer-subscribe { background: #ffffff; }
</style>
<link rel="stylesheet" id="enlighterjs-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/enlighterjs.min.css" type="text/css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jetpack.css" type="text/css" media="all">
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jquery.min.js" id="jquery-core-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jquery-migrate.min.js" id="jquery-migrate-js"></script>
<link rel="https://api.w.org/" href="https://apirobot.me/wp-json/"><link rel="alternate" type="application/json" href="https://apirobot.me/wp-json/wp/v2/posts/177"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://apirobot.me/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://apirobot.me/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 5.7.8">
<link rel="canonical" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api">
<link rel="shortlink" href="https://wp.me/paN0Th-2R">
<link rel="alternate" type="application/json+oembed" href="https://apirobot.me/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fapirobot.me%2Fposts%2Fdjango-react-ts-how-to-create-and-consume-graphql-api">
<link rel="alternate" type="text/xml+oembed" href="https://apirobot.me/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fapirobot.me%2Fposts%2Fdjango-react-ts-how-to-create-and-consume-graphql-api&amp;format=xml">
<style type="text/css">img#wpstats{display:none}</style>
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="Django + React + TS. How to create and consume GraphQL API">
<meta property="og:url" content="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api">
<meta property="og:description" content="This article is dedicated to GraphQL. I will explain what GraphQL is and what advantages it has over REST. Then we will create a simple web application that exposes GraphQL API on server-side and c…">
<meta property="article:published_time" content="2019-01-29T14:46:44+00:00">
<meta property="article:modified_time" content="2019-02-28T13:16:30+00:00">
<meta property="og:site_name" content="apirobot">
<meta property="og:image" content="https://apirobot.me/wp-content/uploads/2019/01/cover-django-react-ts-how-to-create-and-consume-graphql-api.png">
<meta property="og:image:width" content="1280">
<meta property="og:image:height" content="720">
<meta property="og:image:alt" content="">
<meta property="og:locale" content="en_US">
<meta name="twitter:text:title" content="Django + React + TS. How to create and consume GraphQL API">
<meta name="twitter:image" content="https://apirobot.me/wp-content/uploads/2019/01/cover-django-react-ts-how-to-create-and-consume-graphql-api.png?w=640">
<meta name="twitter:card" content="summary_large_image">

<!-- End Jetpack Open Graph Tags -->
<link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/hovercard.min.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/services.min.css"><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style></head>

<body class="post-template-default single single-post postid-177 single-format-standard" data-new-gr-c-s-check-loaded="14.1087.0" data-gr-ext-installed="">
    <div id="page" class="hfeed site">
        <header id="masthead" class="site-header original is-hidden" role="banner">
						<div class="header-wrap" data-parallax-video="">
				<div class="header-wrap-inner">
													<nav id="site-navigation" class="main-navigation site-navigation" role="navigation">
									<div class="menu-wrap">
										<div class="layout-medium">
											<a class="menu-toggle">
												<span class="lines"></span>
											</a>
											
																						
											<div class="nav-menu">
												<ul id="menu-menu-1" class="menu-custom"><li id="menu-item-156" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-156"><a href="https://apirobot.me/">Home</a></li>
<li id="menu-item-157" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-157"><a href="https://apirobot.me/posts">Posts</a></li>
</ul>											</div> <!-- .nav-menu -->
											
																									<a class="search-toggle toggle-link"></a>
														
														<div class="search-container">
															<div class="search-box" role="search">
																<form class="search-form" method="get" action="https://apirobot.me/">
																	<label>
																		<span>
																			Search for																		</span>
																		<input type="search" id="search-field" name="s" placeholder="type and hit enter" class="input-text">
																	</label>
																	<input type="submit" class="search-submit" value="Search">
																</form> <!-- .search-form -->
															</div> <!-- .search-box -->
														</div> <!-- .search-container -->
																								
																									<div class="social-container">
																			<a class="social-link youtube" target="_blank" href="https://www.youtube.com/channel/UC_sjVcrjEr00BR7ZaRLH7SA"></a>
							<a class="social-link twitter" target="_blank" href="https://twitter.com/denisorehovsky"></a>
							<a class="social-link github" target="_blank" href="https://github.com/denisorehovsky"></a>
																	</div> <!-- .social-container -->
																							</div> <!-- .layout-medium -->
									</div> <!-- .menu-wrap -->
								</nav> <!-- #site-navigation .main-navigation .site-navigation -->
															<div class="site-branding">
																					<h1 class="site-title">
													<a href="https://apirobot.me/" rel="home">
														<span class="screen-reader-text">apirobot</span>
																												<img alt="apirobot" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/2_circle.png">
													</a>
												</h1> <!-- .site-title -->
																				
																					<p class="site-description selectionShareable">
													Blog about web development by Denis Orehovsky												</p> <!-- .site-description -->
																			</div> <!-- .site-branding -->
											</div> <!-- .header-wrap-inner -->
			</div> <!-- .header-wrap -->
        </header><header id="masthead" class="site-header clone is-visible smaller" role="banner" style="width: 1279px;">
						<div class="header-wrap" data-parallax-video="">
				<div class="header-wrap-inner">
													<nav id="site-navigation" class="main-navigation site-navigation" role="navigation">
									<div class="menu-wrap">
										<div class="layout-medium">
											<a class="menu-toggle">
												<span class="lines"></span>
											</a>
											
																						
											<div class="nav-menu">
												<ul id="menu-menu-1" class="menu-custom"><li id="menu-item-156" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-156"><a href="https://apirobot.me/">Home</a></li>
<li id="menu-item-157" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-157"><a href="https://apirobot.me/posts">Posts</a></li>
</ul>											</div> <!-- .nav-menu -->
											
																									<a class="search-toggle toggle-link"></a>
														
														<div class="search-container">
															<div class="search-box" role="search">
																<form class="search-form" method="get" action="https://apirobot.me/">
																	<label>
																		<span>
																			Search for																		</span>
																		<input type="search" id="search-field" name="s" placeholder="type and hit enter" class="input-text">
																	</label>
																	<input type="submit" class="search-submit" value="Search">
																</form> <!-- .search-form -->
															</div> <!-- .search-box -->
														</div> <!-- .search-container -->
																								
																									<div class="social-container">
																			<a class="social-link youtube" target="_blank" href="https://www.youtube.com/channel/UC_sjVcrjEr00BR7ZaRLH7SA"></a>
							<a class="social-link twitter" target="_blank" href="https://twitter.com/denisorehovsky"></a>
							<a class="social-link github" target="_blank" href="https://github.com/denisorehovsky"></a>
																	</div> <!-- .social-container -->
																							</div> <!-- .layout-medium -->
									</div> <!-- .menu-wrap -->
								</nav> <!-- #site-navigation .main-navigation .site-navigation -->
															<div class="site-branding">
																					<h1 class="site-title">
													<a href="https://apirobot.me/" rel="home">
														<span class="screen-reader-text">apirobot</span>
																												<img alt="apirobot" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/2_circle.png">
													</a>
												</h1> <!-- .site-title -->
																				
																					<p class="site-description selectionShareable">
													Blog about web development by Denis Orehovsky												</p> <!-- .site-description -->
																			</div> <!-- .site-branding -->
											</div> <!-- .header-wrap-inner -->
			</div> <!-- .header-wrap -->
        </header> <!-- #masthead .site-header -->












			<section class="top-content-single is-top-content-single-full-margins">
				<div class="layout-medium">
								<div class="post-header post-header-classic is-cat-link-border-bottom">
							<header class="entry-header">
				<h1 class="entry-title">Django + React + TS. How to create and consume GraphQL API</h1>					<div class="entry-meta below-title">
									<span class="cat-links">
				<span class="prefix">
					in				</span>
				<a href="https://apirobot.me/posts/category/programming" rel="category tag">Programming</a>			</span>
					<span class="posted-on">
				<span class="prefix">
					on				</span>
				<a href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" rel="bookmark">
					<time class="entry-date published" datetime="2019-01-29T14:46:44+00:00">
						January 29, 2019					</time>
					<time class="updated" datetime="2019-02-28T13:16:30+00:00">
						February 28, 2019					</time>
				</a>
			</span>
					<span class="comment-link">
				<span class="prefix">
					with				</span>
				<a href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api#comments">9 Comments</a>			</span> <!-- .comment-link -->
					<span class="entry-share">
				<span class="entry-share-text">
					Share				</span> <!-- .entry-share-text -->
				
				<span class="entry-share-wrap">
					<span class="entry-share-inner-wrap">
						<a class="share-facebook" rel="nofollow" target="_blank" href="http://www.facebook.com/sharer.php?u=https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api&amp;t=Django+%2B+React+%2B+TS.+How+to+create+and+consume+GraphQL+API" title="Share this post on Facebook">Facebook</a>
						
						<a class="share-twitter" rel="nofollow" target="_blank" href="https://twitter.com/intent/tweet?text=Django%20+%20React%20+%20TS.%20How%20to%20create%20and%20consume%20GraphQL%20API&amp;url=https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" title="Share this post with your followers">Twitter</a>
						
						<a class="share-pinterest" rel="nofollow" target="_blank" href="https://pinterest.com/pin/create/button/?url=https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api&amp;media=https://apirobot.me/wp-content/uploads/2019/01/cover-django-react-ts-how-to-create-and-consume-graphql-api-1060x596.png&amp;description=Django+%2B+React+%2B+TS.+How+to+create+and+consume+GraphQL+API">Pinterest</a>
						
						<a class="share-mail" rel="nofollow" target="_blank" href="mailto:?subject=I%20wanted%20you%20to%20see%20this%20post&amp;body=Check%20out%20this%20post:%20Django%20+%20React%20+%20TS.%20How%20to%20create%20and%20consume%20GraphQL%20API%20https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" title="Email this post to a friend">Email</a>
					</span> <!-- .entry-share-inner-wrap -->
				</span> <!-- .entry-share-wrap -->
			</span> <!-- .entry-share -->
					<span class="entry-like">
							</span>
							</div> <!-- .entry-meta .below-title -->
							</header> <!-- .entry-header -->
							<div class="featured-image">
						<img width="1280" height="720" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/cover-django-react-ts-how-to-create-and-consume-graphql-api.png" class="attachment-theblogger_image_size_7 size-theblogger_image_size_7 wp-post-image" alt="" loading="lazy" srcset="https://apirobot.me/wp-content/uploads/2019/01/cover-django-react-ts-how-to-create-and-consume-graphql-api.png 1280w, https://apirobot.me/wp-content/uploads/2019/01/cover-django-react-ts-how-to-create-and-consume-graphql-api-300x169.png 300w, https://apirobot.me/wp-content/uploads/2019/01/cover-django-react-ts-how-to-create-and-consume-graphql-api-768x432.png 768w, https://apirobot.me/wp-content/uploads/2019/01/cover-django-react-ts-how-to-create-and-consume-graphql-api-1024x576.png 1024w, https://apirobot.me/wp-content/uploads/2019/01/cover-django-react-ts-how-to-create-and-consume-graphql-api-1060x596.png 1060w, https://apirobot.me/wp-content/uploads/2019/01/cover-django-react-ts-how-to-create-and-consume-graphql-api-550x309.png 550w, https://apirobot.me/wp-content/uploads/2019/01/cover-django-react-ts-how-to-create-and-consume-graphql-api-889x500.png 889w" sizes="(max-width: 1280px) 100vw, 1280px">					</div> <!-- .featured-image -->
							</div> <!-- .post-header -->
						</div> <!-- .layout-medium -->
			</section> <!-- .top-content-single -->
		
<div id="main" class="site-main">
	<div class="layout-fixed">
		<div id="primary" class="content-area ">
			<div id="content" class="site-content" role="main">
				<article id="post-177" class="post-177 post type-post status-publish format-standard has-post-thumbnail hentry category-programming tag-django tag-graphql tag-python tag-react tag-typescript">
					<div class="hentry-wrap">
												<div class="entry-content">
							
<p class="selectionShareable">This article is dedicated to GraphQL. I will explain what GraphQL is and what advantages it has over REST. Then we will create a simple web application that exposes GraphQL API on server-side and consumes it on client-side.</p>



<p class="selectionShareable">Stack on server-side:</p>



<ul><li>Python;</li><li>Django;</li><li><a rel="noreferrer noopener" aria-label="Graphene Django (opens in a new tab)" href="https://github.com/graphql-python/graphene-django" target="_blank">Graphene Django</a> for creating GraphQL API.</li></ul>



<p class="selectionShareable">Stack on client-side:</p>



<ul><li>TypeScript;</li><li>React;</li><li><a rel="noreferrer noopener" aria-label="React Apollo (opens in a new tab)" href="https://github.com/apollographql/react-apollo" target="_blank">React Apollo</a> for interacting with GraphQL API.</li></ul>



<p class="selectionShareable">Also I will show you how <a rel="noreferrer noopener" aria-label="GraphQL Code Generator (opens in a new tab)" href="https://github.com/dotansimha/graphql-code-generator" target="_blank">GraphQL Code Generator</a> library can simplify development by generating TypeScript types and React Higher Order Components (HOCs) based on our GraphQL queries and mutations. This library will greatly reduce the amount of code that needs to be written.</p>



<h1 id="graphql-vs-rest">GraphQL vs REST</h1>



<p class="selectionShareable">If you’re a web developer you’re probably already at least a little bit familiar with REST APIs. The concept behind REST is simple. You have resources and each resource has its own endpoint. And you have actions (GET, PATCH, DELETE, …) that allow you to perform different operations on these resources like getting resource, updating resource, deleting resource and etc. But if you’re developing REST API you’ll probably face some problems.</p>



<p class="selectionShareable">Imagine that you have an endpoint for fetching user. When you send a request:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">http get /users/</span><span class="enlighter-n1">1</span></div></div></div><div class="enlighter-raw">http get /users/1</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">http get /users/1</pre>



<p class="selectionShareable">You will get something like this:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k2">"id":</span><span class="enlighter-text"> </span><span class="enlighter-n1">1</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k2">"name":</span><span class="enlighter-text"> </span><span class="enlighter-s0">"Den"</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k2">"followers":</span><span class="enlighter-text"> </span><span class="enlighter-g1">[</span><span class="enlighter-n1">5</span><span class="enlighter-g0">,</span><span class="enlighter-text"> </span><span class="enlighter-n1">10</span><span class="enlighter-g0">,</span><span class="enlighter-text"> </span><span class="enlighter-n1">15</span><span class="enlighter-g1">]</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k2">"avatar":</span><span class="enlighter-text"> </span><span class="enlighter-n1">42</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">{
  "id": 1,
  "name": "Den",
  "followers": [5, 10, 15],
  "avatar": 42
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="json" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">{
  "id": 1,
  "name": "Den",
  "followers": [5, 10, 15],
  "avatar": 42
}</pre>



<p class="selectionShareable">It’s ok if you need only the name of the user, but what if you need information about user’s followers? Then you need to send another three http requests because this user has three followers:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">http get /users/</span><span class="enlighter-n1">5</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">http get /users/</span><span class="enlighter-n1">10</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">http get /users/</span><span class="enlighter-n1">15</span></div></div></div><div class="enlighter-raw">http get /users/5
http get /users/10
http get /users/15</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">http get /users/5
http get /users/10
http get /users/15</pre>



<p class="selectionShareable">Too many requests, especially if the user has a large number of followers.</p>



<p class="selectionShareable">Another approach could be to create multiple endpoints:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">http get /users/</span><span class="enlighter-n1">1</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">http get /users_with_followers/</span><span class="enlighter-n1">1</span></div></div></div><div class="enlighter-raw">http get /users/1
http get /users_with_followers/1</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">http get /users/1
http get /users_with_followers/1</pre>



<p class="selectionShareable">But it can explode into too many endpoints:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">http get /users/</span><span class="enlighter-n1">1</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">http get /users_with_followers/</span><span class="enlighter-n1">1</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">http get /users_with_followers_and_avatars/</span><span class="enlighter-n1">1</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">http get /users_with_avatars/</span><span class="enlighter-n1">1</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">...</span></div></div></div><div class="enlighter-raw">http get /users/1
http get /users_with_followers/1
http get /users_with_followers_and_avatars/1
http get /users_with_avatars/1
...</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">http get /users/1
http get /users_with_followers/1
http get /users_with_followers_and_avatars/1
http get /users_with_avatars/1
...</pre>



<p class="selectionShareable">In that case, you only need to send one http request but it becomes very hard to read and maintain this API.</p>



<p class="selectionShareable">And the last approach could be to just return everything:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k2">"id":</span><span class="enlighter-text"> </span><span class="enlighter-n1">1</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k2">"name":</span><span class="enlighter-text"> </span><span class="enlighter-s0">"Den"</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k2">"followers":</span><span class="enlighter-text"> </span><span class="enlighter-g1">[</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-k2">"id":</span><span class="enlighter-text"> </span><span class="enlighter-n1">5</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-k2">"name":</span><span class="enlighter-text"> </span><span class="enlighter-s0">"Peter"</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-k2">"followers":</span><span class="enlighter-text"> </span><span class="enlighter-g1">[</span><span class="enlighter-n1">25</span><span class="enlighter-g0">,</span><span class="enlighter-text"> </span><span class="enlighter-n1">26</span><span class="enlighter-g1">]</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-k2">"avatar":</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                </span><span class="enlighter-k2">"url":</span><span class="enlighter-text"> </span><span class="enlighter-s0">"&lt;https://avatars2.githubusercontent.com/u/234f2&gt;"</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                </span><span class="enlighter-k2">"width":</span><span class="enlighter-text"> </span><span class="enlighter-n1">350</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                </span><span class="enlighter-k2">"height":</span><span class="enlighter-text"> </span><span class="enlighter-n1">300</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        ...</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">]</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k2">"avatar":</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k2">"url":</span><span class="enlighter-text"> </span><span class="enlighter-s0">"&lt;https://avatars2.githubusercontent.com/u/9641723&gt;"</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k2">"width":</span><span class="enlighter-text"> </span><span class="enlighter-n1">400</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k2">"height":</span><span class="enlighter-text"> </span><span class="enlighter-n1">300</span><span class="enlighter-g0">,</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">{
  "id": 1,
  "name": "Den",
  "followers": [
        {
            "id": 5,
            "name": "Peter",
            "followers": [25, 26],
            "avatar": {
                "url": "&lt;https://avatars2.githubusercontent.com/u/234f2&gt;",
                "width": 350,
                "height": 300,
            }
        },
        ...
    ]
  "avatar": {
        "url": "&lt;https://avatars2.githubusercontent.com/u/9641723&gt;",
        "width": 400,
        "height": 300,
    }
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="json" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">{
  "id": 1,
  "name": "Den",
  "followers": [
		{
			"id": 5,
			"name": "Peter",
			"followers": [25, 26],
			"avatar": {
				"url": "&lt;https://avatars2.githubusercontent.com/u/234f2&gt;",
				"width": 350,
				"height": 300,
			}
		},
		...
	]
  "avatar": {
		"url": "&lt;https://avatars2.githubusercontent.com/u/9641723&gt;",
		"width": 400,
		"height": 300,
	}
}
</pre>



<p class="selectionShareable">But what if you need only the name of the user? In that case, you’ll get a bunch of data that you don’t need.</p>



<p class="selectionShareable">So that’s where GraphQL comes into play. GraphQL is a query language for your API and it can completely replace REST. It has some features that solve common REST problems:</p>



<ol><li>Client specifies<strong> all the data that it needs in a query.</strong> It means no more over-fetching and under-fetching data because client gets exactly what it needs. Nothing more and nothing less.</li><li>Client gets <strong>all the data in a single request</strong> which is not possible in REST APIs because REST requires loading data from multiple URLs.</li><li>We have a<strong> single endpoint</strong>. No more v2 and v3 for the same API. Old fields can be deprecated and hidden from tools.</li><li>Our <strong>API is strongly typed</strong>. This makes validation easier and provides us with useful client tools like auto-generated documentation or real-time error highlighting that wouldn’t be possible if the API wasn’t typed.</li></ol>



<h1 id="graphql-concepts">GraphQL concepts</h1>



<p class="selectionShareable">GraphQL has three main operations:</p>



<ol><li><strong>Query </strong>– fetch data from the server;</li><li><strong>Mutation </strong>– modify/create data on the server or run anything with side effects like sending emails and etc;</li><li><strong>Subscription </strong>– create long-lived connection with the server which allows client to receive event-based realtime updates.</li></ol>



<blockquote class="wp-block-quote"><p class="selectionShareable">Graphene Django doesn’t support subscriptions for the moment of writing this article. So we’re going to discuss only queries and mutations here.</p></blockquote>



<p class="selectionShareable">GraphQL exposes these 3 operations via a <strong>schema</strong>. Schema is comprised of <strong>types</strong>. Types are custom objects that represent how your data looks like. For example, if you’re building a blog, your API should have types like Post, Like, Comment and etc. In our app we will create a type <code>Note</code>:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">type Note </span><span class="enlighter-g1">{</span><span class="enlighter-text">    </span></div></div><div class=""><div><span class="enlighter-text">    id: ID!    </span></div></div><div class=""><div><span class="enlighter-text">    title: String!</span></div></div><div class=""><div><span class="enlighter-text">    body: String!</span></div></div><div class=""><div><span class="enlighter-text">    createdAt: DateTime!</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">type Note {    
    id: ID!    
    title: String!
    body: String!
    createdAt: DateTime!
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">type Note {    
    id: ID!    
    title: String!
    body: String!
    createdAt: DateTime!
}</pre>



<p class="selectionShareable">Types have fields and each field has a type. For example, <code>title</code> field has a type <code>String</code>.</p>



<p class="selectionShareable">Exclamation point at the end of the type means that the field is non-nullable, which means that the field should always return some data.</p>



<p class="selectionShareable">After we create our schema, we can send different requests to API using GraphiQL interface.</p>



<p class="selectionShareable">For example, we can make a query:</p>



<figure class="wp-block-image"><img loading="lazy" width="558" height="466" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/Peek2019-01-1413-04-1.gif" alt="" class="wp-image-184"></figure>



<p class="selectionShareable">As you can see, the result has the same shape as a query.</p>



<p class="selectionShareable">Or we can send a mutation:</p>



<figure class="wp-block-image"><img loading="lazy" width="558" height="466" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/Peek2019-01-1413-32-1.gif" alt="" class="wp-image-185"></figure>



<h1 id="server-side">Server-side</h1>



<p class="selectionShareable">With that said, let’s create a simple web application. The end result will look like this:</p>



<figure class="wp-block-image"><img loading="lazy" width="750" height="700" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/Peek2019-01-1911-01-1.gif" alt="" class="wp-image-186"></figure>



<p class="selectionShareable"> The source code of the application can be found <a rel="noreferrer noopener" aria-label="here (opens in a new tab)" href="https://github.com/apirobot/django-react-graphql-simplenote" target="_blank">here</a>. </p>



<h2 id="set-up-boilerplate">Set up boilerplate</h2>



<p class="selectionShareable">Before we start messing with GraphQL we need to do a couple of simple steps:</p>



<ul><li>Create an empty Django project:</li></ul>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># create folders</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g0">$</span><span class="enlighter-text"> mkdir django-react-graphql-simplenote</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g0">$</span><span class="enlighter-text"> cd django-react-graphql-simplenote</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g0">$</span><span class="enlighter-text"> mkdir back </span><span class="enlighter-g0">&amp;&amp;</span><span class="enlighter-text"> cd back</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0"># create and activate virtualenv</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g0">$</span><span class="enlighter-text"> virtualenv -p python3 .venv </span><span class="enlighter-g0">&amp;&amp;</span><span class="enlighter-text"> source .venv/bin/activate</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0"># install dependencies</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g0">$</span><span class="enlighter-text"> pip install django graphene-django django-filter djangorestframework</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0"># start project</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g0">$</span><span class="enlighter-text"> django-admin startproject simplenote .</span></div></div></div><div class="enlighter-raw"># create folders
$ mkdir django-react-graphql-simplenote
$ cd django-react-graphql-simplenote
$ mkdir back &amp;&amp; cd back

# create and activate virtualenv
$ virtualenv -p python3 .venv &amp;&amp; source .venv/bin/activate

# install dependencies
$ pip install django graphene-django django-filter djangorestframework

# start project
$ django-admin startproject simplenote .</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># create folders
$ mkdir django-react-graphql-simplenote
$ cd django-react-graphql-simplenote
$ mkdir back &amp;&amp; cd back

# create and activate virtualenv
$ virtualenv -p python3 .venv &amp;&amp; source .venv/bin/activate

# install dependencies
$ pip install django graphene-django django-filter djangorestframework

# start project
$ django-admin startproject simplenote .</pre>



<ul><li>Create <code>notes</code> app:</li></ul>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">$ django-admin startapp notes</span></div></div></div><div class="enlighter-raw">$ django-admin startapp notes</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">$ django-admin startapp notes</pre>



<p class="selectionShareable">Don’t forget to add this app to settings:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># back/simplenote/settings.py</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">...</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">INSTALLED_APPS = </span><span class="enlighter-g1">[</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    ...</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-s0">'notes'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">]</span></div></div></div><div class="enlighter-raw"># back/simplenote/settings.py

...

INSTALLED_APPS = [
    ...
    'notes',
]</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="python" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># back/simplenote/settings.py

...

INSTALLED_APPS = [
    ...
    'notes',
]</pre>



<ul><li>Create <code>Note</code> model:</li></ul>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># back/notes/models.py</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">django.db</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> models</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">django.utils.translation</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> ugettext_lazy </span><span class="enlighter-k0">as</span><span class="enlighter-text"> _</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> </span><span class="enlighter-m0">Note</span><span class="enlighter-g1">(</span><span class="enlighter-text">models.Model</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">    title = models.</span><span class="enlighter-m1">CharField</span><span class="enlighter-g1">(</span><span class="enlighter-text">max_length=</span><span class="enlighter-n1">255</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    body = models.</span><span class="enlighter-m1">TextField</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    created_at = models.</span><span class="enlighter-m1">DateTimeField</span><span class="enlighter-g1">(</span><span class="enlighter-text">auto_now_add=</span><span class="enlighter-e0">True</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">class</span><span class="enlighter-text"> Meta:</span></div></div><div class=""><div><span class="enlighter-text">        verbose_name = </span><span class="enlighter-m0">_</span><span class="enlighter-g1">(</span><span class="enlighter-s0">'note'</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        verbose_name_plural = </span><span class="enlighter-m0">_</span><span class="enlighter-g1">(</span><span class="enlighter-s0">'notes'</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        ordering = </span><span class="enlighter-g1">(</span><span class="enlighter-s0">'-created_at'</span><span class="enlighter-text">, </span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">def</span><span class="enlighter-text"> </span><span class="enlighter-e3">__str__</span><span class="enlighter-g1">(</span><span class="enlighter-text">self</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-s0">'{} (#{})'</span><span class="enlighter-text">.</span><span class="enlighter-m1">format</span><span class="enlighter-g1">(</span><span class="enlighter-text">self.title, self.pk</span><span class="enlighter-g1">)</span></div></div></div><div class="enlighter-raw"># back/notes/models.py

from django.db import models
from django.utils.translation import ugettext_lazy as _


class Note(models.Model):
    title = models.CharField(max_length=255)
    body = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        verbose_name = _('note')
        verbose_name_plural = _('notes')
        ordering = ('-created_at', )

    def __str__(self):
        return '{} (#{})'.format(self.title, self.pk)</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="python" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># back/notes/models.py

from django.db import models
from django.utils.translation import ugettext_lazy as _


class Note(models.Model):
    title = models.CharField(max_length=255)
    body = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        verbose_name = _('note')
        verbose_name_plural = _('notes')
        ordering = ('-created_at', )

    def __str__(self):
        return '{} (#{})'.format(self.title, self.pk)</pre>



<p class="selectionShareable">Also don’t forget to make migrations: </p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">$ python manage.</span><span class="enlighter-m3">py</span><span class="enlighter-text"> makemigrations</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g0">$</span><span class="enlighter-text"> python manage.</span><span class="enlighter-m3">py</span><span class="enlighter-text"> migrate</span></div></div></div><div class="enlighter-raw">$ python manage.py makemigrations
$ python manage.py migrate</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">$ python manage.py makemigrations
$ python manage.py migrate</pre>



<h2 id="create-graphql-api">Create GraphQL API</h2>



<p class="selectionShareable"><strong>Type</strong></p>



<p class="selectionShareable">First let’s start from creating GraphQL <code>NoteType</code> which will be based on <code>Note</code> model:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># back/gql/notes/types.py</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">graphene_django</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> DjangoObjectType</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">notes.models</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> Note</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> </span><span class="enlighter-m0">NoteType</span><span class="enlighter-g1">(</span><span class="enlighter-text">DjangoObjectType</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">class</span><span class="enlighter-text"> Meta:</span></div></div><div class=""><div><span class="enlighter-text">        model = Note</span></div></div><div class=""><div><span class="enlighter-text">        only_fields = </span><span class="enlighter-g1">(</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-s0">'id'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-s0">'title'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-s0">'body'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-s0">'created_at'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        use_connection = </span><span class="enlighter-e0">True</span></div></div></div><div class="enlighter-raw"># back/gql/notes/types.py

from graphene_django import DjangoObjectType
from notes.models import Note


class NoteType(DjangoObjectType):
    class Meta:
        model = Note
        only_fields = (
            'id',
            'title',
            'body',
            'created_at',
        )
        use_connection = True</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="python" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># back/gql/notes/types.py

from graphene_django import DjangoObjectType
from notes.models import Note


class NoteType(DjangoObjectType):
    class Meta:
        model = Note
        only_fields = (
            'id',
            'title',
            'body',
            'created_at',
        )
        use_connection = True</pre>



<p class="selectionShareable">Typically, when you create an object type, you need to create a resolver function for each field. It could look like this:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k0">class</span><span class="enlighter-text"> </span><span class="enlighter-m0">NoteType</span><span class="enlighter-g1">(</span><span class="enlighter-text">DjangoObjectType</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">    is_old = </span><span class="enlighter-m0">Boolean</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">class</span><span class="enlighter-text"> Meta:</span></div></div><div class=""><div><span class="enlighter-text">        ...</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">def</span><span class="enlighter-text"> </span><span class="enlighter-m0">resolve_is_old</span><span class="enlighter-g1">(</span><span class="enlighter-text">root, *args</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k0">return</span><span class="enlighter-text"> root.created_at </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">timezone.</span><span class="enlighter-m1">now</span><span class="enlighter-g1">()</span><span class="enlighter-text"> - timezone.</span><span class="enlighter-m1">timedelta</span><span class="enlighter-g1">(</span><span class="enlighter-text">days=</span><span class="enlighter-n1">666</span><span class="enlighter-g1">))</span></div></div></div><div class="enlighter-raw">class NoteType(DjangoObjectType):
    is_old = Boolean()

    class Meta:
        ...

    def resolve_is_old(root, *args):
        return root.created_at &lt; (timezone.now() - timezone.timedelta(days=666))</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="python" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">class NoteType(DjangoObjectType):
    is_old = Boolean()

    class Meta:
        ...

    def resolve_is_old(root, *args):
        return root.created_at &lt; (timezone.now() - timezone.timedelta(days=666))</pre>



<p class="selectionShareable">Resolver function is a method that being called when the client requests a field. But we don’t need to do any of this because <code>DjangoObjectType</code> does this automatically for every field that we specified in <code>only_fields</code>.</p>



<p class="selectionShareable">Another thing that might be confusing is <code>use_connection = True</code>. This line creates connection for <code>NoteType</code>. Connection allows us to slice and paginate data in GraphQL query when we’re trying to get a list of notes. You could read <a href="https://blog.apollographql.com/explaining-graphql-connections-c48b7c3d6976" target="_blank" rel="noreferrer noopener" aria-label=" (opens in a new tab)">this</a> article if you want to learn more about connections.</p>



<p class="selectionShareable"><strong>Query</strong></p>



<p class="selectionShareable">Since we have <code>NoteType</code>, now we’re ready to create a schema itself:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># back/gql/schema.py</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">graphene</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> Argument, Field, ID, ObjectType, Schema</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">graphene_django</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> DjangoConnectionField</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">notes.models</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> Note</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">.notes.types</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> NoteType</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> </span><span class="enlighter-m0">Query</span><span class="enlighter-g1">(</span><span class="enlighter-text">ObjectType</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">    notes = </span><span class="enlighter-m0">DjangoConnectionField</span><span class="enlighter-g1">(</span><span class="enlighter-text">NoteType</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    note = </span><span class="enlighter-m0">Field</span><span class="enlighter-g1">(</span><span class="enlighter-text">NoteType, id=</span><span class="enlighter-m0">Argument</span><span class="enlighter-g1">(</span><span class="enlighter-text">ID, required=</span><span class="enlighter-e0">True</span><span class="enlighter-g1">))</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">def</span><span class="enlighter-text"> </span><span class="enlighter-m0">resolve_notes</span><span class="enlighter-g1">(</span><span class="enlighter-text">root, info, **kwargs</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k0">return</span><span class="enlighter-text"> Note.objects.</span><span class="enlighter-m1">all</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">def</span><span class="enlighter-text"> </span><span class="enlighter-m0">resolve_note</span><span class="enlighter-g1">(</span><span class="enlighter-text">root, info, **kwargs</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k0">return</span><span class="enlighter-text"> Note.objects.</span><span class="enlighter-m1">get</span><span class="enlighter-g1">(</span><span class="enlighter-text">id=kwargs.</span><span class="enlighter-m1">get</span><span class="enlighter-g1">(</span><span class="enlighter-s0">'id'</span><span class="enlighter-g1">))</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">schema = </span><span class="enlighter-m0">Schema</span><span class="enlighter-g1">(</span><span class="enlighter-text">query=Query</span><span class="enlighter-g1">)</span></div></div></div><div class="enlighter-raw"># back/gql/schema.py

from graphene import Argument, Field, ID, ObjectType, Schema
from graphene_django import DjangoConnectionField
from notes.models import Note
from .notes.types import NoteType


class Query(ObjectType):
    notes = DjangoConnectionField(NoteType)
    note = Field(NoteType, id=Argument(ID, required=True))

    def resolve_notes(root, info, **kwargs):
        return Note.objects.all()

    def resolve_note(root, info, **kwargs):
        return Note.objects.get(id=kwargs.get('id'))


schema = Schema(query=Query)</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="python" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># back/gql/schema.py

from graphene import Argument, Field, ID, ObjectType, Schema
from graphene_django import DjangoConnectionField
from notes.models import Note
from .notes.types import NoteType


class Query(ObjectType):
    notes = DjangoConnectionField(NoteType)
    note = Field(NoteType, id=Argument(ID, required=True))

    def resolve_notes(root, info, **kwargs):
        return Note.objects.all()

    def resolve_note(root, info, **kwargs):
        return Note.objects.get(id=kwargs.get('id'))


schema = Schema(query=Query)</pre>



<p class="selectionShareable">Before trying to test if it works, we should make some changes in settings:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># back/simplenote/settings.py</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">INSTALLED_APPS = </span><span class="enlighter-g1">[</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    ...</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-s0">'graphene_django'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">]</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">...</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">GRAPHENE = </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-s0">'SCHEMA'</span><span class="enlighter-text">: </span><span class="enlighter-s0">'gql.schema.schema'</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw"># back/simplenote/settings.py

INSTALLED_APPS = [
    ...
    'graphene_django',
]

...

GRAPHENE = {
    'SCHEMA': 'gql.schema.schema'
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="python" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># back/simplenote/settings.py

INSTALLED_APPS = [
    ...
    'graphene_django',
]

...

GRAPHENE = {
    'SCHEMA': 'gql.schema.schema'
}</pre>



<p class="selectionShareable">And create an endpoint for our API:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># back/simplenote/urls.py</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">...</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">django.views.decorators.csrf</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> csrf_exempt</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">graphene_django.views</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> GraphQLView</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">urlpatterns = </span><span class="enlighter-g1">[</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    ...</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-m0">path</span><span class="enlighter-g1">(</span><span class="enlighter-s0">'graphql/'</span><span class="enlighter-text">, </span><span class="enlighter-m0">csrf_exempt</span><span class="enlighter-g1">(</span><span class="enlighter-text">GraphQLView.</span><span class="enlighter-m1">as_view</span><span class="enlighter-g1">(</span><span class="enlighter-text">graphiql=</span><span class="enlighter-e0">True</span><span class="enlighter-g1">)))</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">]</span></div></div></div><div class="enlighter-raw"># back/simplenote/urls.py

...
from django.views.decorators.csrf import csrf_exempt
from graphene_django.views import GraphQLView

urlpatterns = [
    ...
    path('graphql/', csrf_exempt(GraphQLView.as_view(graphiql=True))),
]</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="python" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># back/simplenote/urls.py

...
from django.views.decorators.csrf import csrf_exempt
from graphene_django.views import GraphQLView

urlpatterns = [
    ...
    path('graphql/', csrf_exempt(GraphQLView.as_view(graphiql=True))),
]</pre>



<p class="selectionShareable">Now we should be able to get a list of notes or any specific note by its id. You can test it by making a query in GraphiQL:</p>



<figure class="wp-block-image"><img loading="lazy" width="558" height="466" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/Peek2019-01-1413-04-1.gif" alt="" class="wp-image-184"></figure>



<p class="selectionShareable"><strong>Filter</strong></p>



<p class="selectionShareable">Graphene Django integrates with <a href="https://github.com/carltongibson/django-filter" target="_blank" rel="noreferrer noopener" aria-label="django-filter (opens in a new tab)">django-filter</a> library. It allows us to filter result data in different ways. Let’s create a search filter which will search notes based on values of title and body:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># back/gql/notes/filters.py</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">django.db.models</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> Q</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> django_filters</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">notes.models</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> Note</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> </span><span class="enlighter-m0">NoteFilter</span><span class="enlighter-g1">(</span><span class="enlighter-text">django_filters.FilterSet</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">    search = django_filters.</span><span class="enlighter-m1">CharFilter</span><span class="enlighter-g1">(</span><span class="enlighter-text">method=</span><span class="enlighter-s0">'filter_search'</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">class</span><span class="enlighter-text"> Meta:</span></div></div><div class=""><div><span class="enlighter-text">        model = Note</span></div></div><div class=""><div><span class="enlighter-text">        fields = </span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">def</span><span class="enlighter-text"> </span><span class="enlighter-m0">filter_search</span><span class="enlighter-g1">(</span><span class="enlighter-text">self, queryset, name, value</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k0">return</span><span class="enlighter-text"> queryset.</span><span class="enlighter-m1">filter</span><span class="enlighter-g1">(</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-m0">Q</span><span class="enlighter-g1">(</span><span class="enlighter-text">title__icontains=value</span><span class="enlighter-g1">)</span><span class="enlighter-text"> | </span><span class="enlighter-m0">Q</span><span class="enlighter-g1">(</span><span class="enlighter-text">body__icontains=value</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">)</span></div></div></div><div class="enlighter-raw"># back/gql/notes/filters.py

from django.db.models import Q
import django_filters
from notes.models import Note


class NoteFilter(django_filters.FilterSet):
    search = django_filters.CharFilter(method='filter_search')

    class Meta:
        model = Note
        fields = ()

    def filter_search(self, queryset, name, value):
        return queryset.filter(
            Q(title__icontains=value) | Q(body__icontains=value)
        )</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="python" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># back/gql/notes/filters.py

from django.db.models import Q
import django_filters
from notes.models import Note


class NoteFilter(django_filters.FilterSet):
    search = django_filters.CharFilter(method='filter_search')

    class Meta:
        model = Note
        fields = ()

    def filter_search(self, queryset, name, value):
        return queryset.filter(
            Q(title__icontains=value) | Q(body__icontains=value)
        )</pre>



<p class="selectionShareable">In order for it to work, we should update <code>Query.notes</code> field:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># back/gql/schema.py</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">...</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">graphene_django.filter</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> DjangoFilterConnectionField</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> </span><span class="enlighter-m0">Query</span><span class="enlighter-g1">(</span><span class="enlighter-text">ObjectType</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">    notes = </span><span class="enlighter-m0">DjangoFilterConnectionField</span><span class="enlighter-g1">(</span><span class="enlighter-text">NoteType, filterset_class=NoteFilter</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    ...</span></div></div></div><div class="enlighter-raw"># back/gql/schema.py

...
from graphene_django.filter import DjangoFilterConnectionField


class Query(ObjectType):
    notes = DjangoFilterConnectionField(NoteType, filterset_class=NoteFilter)
    ...</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="python" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># back/gql/schema.py

...
from graphene_django.filter import DjangoFilterConnectionField


class Query(ObjectType):
    notes = DjangoFilterConnectionField(NoteType, filterset_class=NoteFilter)
    ...</pre>



<p class="selectionShareable">Let’s test it:</p>



<figure class="wp-block-image"><img loading="lazy" width="550" height="490" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/Peek2019-01-1708-41-1.gif" alt="" class="wp-image-192"></figure>



<p class="selectionShareable"><strong>Mutation</strong></p>



<p class="selectionShareable">Another important concept in GraphQL is mutations. In our app we should be able to create and delete notes. Let’s write these mutations down:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># back/gql/notes/mutations.py</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">graphene</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> Boolean, Field, ID, InputObjectType, Mutation, String</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">rest_framework</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> serializers</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">notes.models</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> Note</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">.types</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> NoteType</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> </span><span class="enlighter-m0">NoteSerializer</span><span class="enlighter-g1">(</span><span class="enlighter-text">serializers.ModelSerializer</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">class</span><span class="enlighter-text"> Meta:</span></div></div><div class=""><div><span class="enlighter-text">        model = Note</span></div></div><div class=""><div><span class="enlighter-text">        fields = </span><span class="enlighter-g1">(</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-s0">'id'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-s0">'title'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-s0">'body'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> </span><span class="enlighter-m0">NoteInputType</span><span class="enlighter-g1">(</span><span class="enlighter-text">InputObjectType</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">    title = </span><span class="enlighter-m0">String</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    body = </span><span class="enlighter-m0">String</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> </span><span class="enlighter-m0">NoteCreate</span><span class="enlighter-g1">(</span><span class="enlighter-text">Mutation</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">class</span><span class="enlighter-text"> Arguments:</span></div></div><div class=""><div><span class="enlighter-text">        input = </span><span class="enlighter-m0">NoteInputType</span><span class="enlighter-g1">(</span><span class="enlighter-text">required=</span><span class="enlighter-e0">True</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    note = </span><span class="enlighter-m0">Field</span><span class="enlighter-g1">(</span><span class="enlighter-text">NoteType</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    @classmethod</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">def</span><span class="enlighter-text"> </span><span class="enlighter-m0">mutate</span><span class="enlighter-g1">(</span><span class="enlighter-text">cls, root, info, **data</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">        serializer = </span><span class="enlighter-m0">NoteSerializer</span><span class="enlighter-g1">(</span><span class="enlighter-text">data=data.</span><span class="enlighter-m1">get</span><span class="enlighter-g1">(</span><span class="enlighter-s0">'input'</span><span class="enlighter-g1">))</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        serializer.</span><span class="enlighter-m1">is_valid</span><span class="enlighter-g1">(</span><span class="enlighter-text">raise_exception=</span><span class="enlighter-e0">True</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">NoteCreate</span><span class="enlighter-g1">(</span><span class="enlighter-text">note=serializer.</span><span class="enlighter-m1">save</span><span class="enlighter-g1">())</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> </span><span class="enlighter-m0">NoteDelete</span><span class="enlighter-g1">(</span><span class="enlighter-text">Mutation</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">class</span><span class="enlighter-text"> Arguments:</span></div></div><div class=""><div><span class="enlighter-text">        id = </span><span class="enlighter-m0">ID</span><span class="enlighter-g1">(</span><span class="enlighter-text">required=</span><span class="enlighter-e0">True</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    ok = </span><span class="enlighter-m0">Boolean</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    @classmethod</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">def</span><span class="enlighter-text"> </span><span class="enlighter-m0">mutate</span><span class="enlighter-g1">(</span><span class="enlighter-text">cls, root, info, **data</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">        note = Note.objects.</span><span class="enlighter-m1">get</span><span class="enlighter-g1">(</span><span class="enlighter-text">id=data.</span><span class="enlighter-m1">get</span><span class="enlighter-g1">(</span><span class="enlighter-s0">'id'</span><span class="enlighter-g1">))</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        note.</span><span class="enlighter-m1">delete</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">NoteDelete</span><span class="enlighter-g1">(</span><span class="enlighter-text">ok=</span><span class="enlighter-e0">True</span><span class="enlighter-g1">)</span></div></div></div><div class="enlighter-raw"># back/gql/notes/mutations.py

from graphene import Boolean, Field, ID, InputObjectType, Mutation, String
from rest_framework import serializers
from notes.models import Note
from .types import NoteType


class NoteSerializer(serializers.ModelSerializer):
    class Meta:
        model = Note
        fields = (
            'id',
            'title',
            'body',
        )


class NoteInputType(InputObjectType):
    title = String()
    body = String()


class NoteCreate(Mutation):
    class Arguments:
        input = NoteInputType(required=True)

    note = Field(NoteType)

    @classmethod
    def mutate(cls, root, info, **data):
        serializer = NoteSerializer(data=data.get('input'))
        serializer.is_valid(raise_exception=True)

        return NoteCreate(note=serializer.save())


class NoteDelete(Mutation):
    class Arguments:
        id = ID(required=True)

    ok = Boolean()

    @classmethod
    def mutate(cls, root, info, **data):
        note = Note.objects.get(id=data.get('id'))
        note.delete()

        return NoteDelete(ok=True)</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="python" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># back/gql/notes/mutations.py

from graphene import Boolean, Field, ID, InputObjectType, Mutation, String
from rest_framework import serializers
from notes.models import Note
from .types import NoteType


class NoteSerializer(serializers.ModelSerializer):
    class Meta:
        model = Note
        fields = (
            'id',
            'title',
            'body',
        )


class NoteInputType(InputObjectType):
    title = String()
    body = String()


class NoteCreate(Mutation):
    class Arguments:
        input = NoteInputType(required=True)

    note = Field(NoteType)

    @classmethod
    def mutate(cls, root, info, **data):
        serializer = NoteSerializer(data=data.get('input'))
        serializer.is_valid(raise_exception=True)

        return NoteCreate(note=serializer.save())


class NoteDelete(Mutation):
    class Arguments:
        id = ID(required=True)

    ok = Boolean()

    @classmethod
    def mutate(cls, root, info, **data):
        note = Note.objects.get(id=data.get('id'))
        note.delete()

        return NoteDelete(ok=True)</pre>



<p class="selectionShareable">As you can see from the code, I’ve used <a href="https://github.com/encode/django-rest-framework" target="_blank" rel="noreferrer noopener" aria-label="django rest framework (opens in a new tab)">django rest framework</a> for validating input data. Graphene Django has integration with django rest framework and django forms out of the box but I don’t like how it’s implemented, so I prefer to write CRUD operations myself.</p>



<p class="selectionShareable">Before trying to test it, we need to update our schema:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># back/gql/schema.py</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">...</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">from </span><span class="enlighter-k10">.notes.mutations</span><span class="enlighter-k0"> import</span><span class="enlighter-text"> NoteCreate, NoteDelete</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">...</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> </span><span class="enlighter-m0">Mutation</span><span class="enlighter-g1">(</span><span class="enlighter-text">ObjectType</span><span class="enlighter-g1">)</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">    note_create = NoteCreate.</span><span class="enlighter-m1">Field</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    note_delete = NoteDelete.</span><span class="enlighter-m1">Field</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">schema = </span><span class="enlighter-m0">Schema</span><span class="enlighter-g1">(</span><span class="enlighter-text">query=Query, mutation=Mutation</span><span class="enlighter-g1">)</span></div></div></div><div class="enlighter-raw"># back/gql/schema.py

...
from .notes.mutations import NoteCreate, NoteDelete

...

class Mutation(ObjectType):
    note_create = NoteCreate.Field()
    note_delete = NoteDelete.Field()


schema = Schema(query=Query, mutation=Mutation)</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="python" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># back/gql/schema.py

...
from .notes.mutations import NoteCreate, NoteDelete

...

class Mutation(ObjectType):
    note_create = NoteCreate.Field()
    note_delete = NoteDelete.Field()


schema = Schema(query=Query, mutation=Mutation)</pre>



<p class="selectionShareable"> Now we’re good to go: </p>



<figure class="wp-block-image"><img loading="lazy" width="558" height="466" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/Peek2019-01-1413-32-1.gif" alt="" class="wp-image-185"></figure>



<h2 id="cross-origin-resource-sharing">Cross-Origin Resource Sharing</h2>



<p class="selectionShareable">The last thing that we shouldn’t forget to do is to add CORS headers to responses. Because if the client tries to send a request to our API it will get an error like this:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">Failed to load </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">http</span><span class="enlighter-c0">://localhost:8000/graphql/:&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">Response to preflight request doesn</span><span class="enlighter-s0">'t pass access control check:</span></div></div><div class=""><div><span class="enlighter-s0">No '</span><span class="enlighter-text">Access-Control-Allow-Origin</span><span class="enlighter-s0">' header is present on the requested resource.</span></div></div><div class=""><div><span class="enlighter-s0">Origin '</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">http</span><span class="enlighter-c0">://localhost:3000&gt;' is therefore not allowed access. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.</span></div></div></div><div class="enlighter-raw">Failed to load &lt;http://localhost:8000/graphql/:&gt;
Response to preflight request doesn't pass access control check:
No 'Access-Control-Allow-Origin' header is present on the requested resource.
Origin '&lt;http://localhost:3000&gt;' is therefore not allowed access. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">Failed to load &lt;http://localhost:8000/graphql/:&gt;
Response to preflight request doesn't pass access control check:
No 'Access-Control-Allow-Origin' header is present on the requested resource.
Origin '&lt;http://localhost:3000&gt;' is therefore not allowed access. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.</pre>



<p class="selectionShareable">To prevent this, we need to install <a href="https://github.com/ottoyiu/django-cors-headers" target="_blank" rel="noreferrer noopener" aria-label="django-cors-headers (opens in a new tab)">django-cors-headers</a>:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">$ pip install django-cors-headers</span></div></div></div><div class="enlighter-raw">$ pip install django-cors-headers</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">$ pip install django-cors-headers</pre>



<p class="selectionShareable">And update settings:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># back/simplenote/settings.py</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">INSTALLED_APPS = </span><span class="enlighter-g1">[</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    ...</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-s0">'corsheaders'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">]</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">MIDDLEWARE = </span><span class="enlighter-g1">[</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    ...</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-s0">'corsheaders.middleware.CorsMiddleware'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-s0">'django.middleware.common.CommonMiddleware'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">    ...</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">]</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">CORS_ORIGIN_ALLOW_ALL = </span><span class="enlighter-e0">True</span></div></div></div><div class="enlighter-raw"># back/simplenote/settings.py

INSTALLED_APPS = [
    ...
    'corsheaders',
]

MIDDLEWARE = [
    ...
    'corsheaders.middleware.CorsMiddleware',
    'django.middleware.common.CommonMiddleware',
    ...
]

CORS_ORIGIN_ALLOW_ALL = True</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="python" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># back/simplenote/settings.py

INSTALLED_APPS = [
    ...
    'corsheaders',
]

MIDDLEWARE = [
    ...
    'corsheaders.middleware.CorsMiddleware',
    'django.middleware.common.CommonMiddleware',
    ...
]

CORS_ORIGIN_ALLOW_ALL = True</pre>



<h1 id="client-side">Client-side</h1>



<p class="selectionShareable">We’re done with API!</p>



<figure class="wp-block-image"><img loading="lazy" width="498" height="230" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/tenor-2.gif" alt="" class="wp-image-202"></figure>



<p class="selectionShareable">Now we can start working on our client application that will consume this API that we have just created. On client-side we will use:</p>



<ul><li>TypeScript and React;</li><li><a rel="noreferrer noopener" aria-label="React Apollo (opens in a new tab)" href="https://github.com/apollographql/react-apollo" target="_blank">React&nbsp;Apollo</a> for interacting with GraphQL API;</li><li><a href="https://github.com/ReactTraining/react-router">React Router</a>;</li><li><a rel="noreferrer noopener" aria-label="GraphQL Code Generator (opens in a new tab)" href="https://github.com/dotansimha/graphql-code-generator" target="_blank">GraphQL Code Generator</a>;</li><li><a href="https://ant.design/" target="_blank" rel="noreferrer noopener" aria-label="Ant Design (opens in a new tab)">Ant Design</a> which provides UI design and React components out of the box.</li></ul>



<h2 id="set-up-boilerplate">Set up boilerplate</h2>



<p class="selectionShareable">First we need to create a project and install dependencies:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># start project</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g0">$</span><span class="enlighter-text"> create-react-app simplenote --scripts-version=react-scripts-ts</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g0">$</span><span class="enlighter-text"> mv simplenote front </span><span class="enlighter-g0">&amp;&amp;</span><span class="enlighter-text"> cd front</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-c0"></span></div></div><div class=""><div><span class="enlighter-c0"># install dependencies</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g0">$</span><span class="enlighter-text"> yarn add antd react-router-dom query-string graphql graphql-tag apollo-cache-inmemory apollo-link-http apollo-client react-apollo</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g0">$</span><span class="enlighter-text"> yarn add -D @types/react-router-dom @types/graphql @types/query-string</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g0">$</span><span class="enlighter-text"> yarn add -D graphql-code-generator graphql-codegen-typescript-common graphql-codegen-typescript-react-apollo-template graphql-codegen-typescript-template</span></div></div></div><div class="enlighter-raw"># start project
$ create-react-app simplenote --scripts-version=react-scripts-ts
$ mv simplenote front &amp;&amp; cd front

# install dependencies
$ yarn add antd react-router-dom query-string graphql graphql-tag apollo-cache-inmemory apollo-link-http apollo-client react-apollo
$ yarn add -D @types/react-router-dom @types/graphql @types/query-string
$ yarn add -D graphql-code-generator graphql-codegen-typescript-common graphql-codegen-typescript-react-apollo-template graphql-codegen-typescript-template</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># start project
$ create-react-app simplenote --scripts-version=react-scripts-ts
$ mv simplenote front &amp;&amp; cd front

# install dependencies
$ yarn add antd react-router-dom query-string graphql graphql-tag apollo-cache-inmemory apollo-link-http apollo-client react-apollo
$ yarn add -D @types/react-router-dom @types/graphql @types/query-string
$ yarn add -D graphql-code-generator graphql-codegen-typescript-common graphql-codegen-typescript-react-apollo-template graphql-codegen-typescript-template</pre>



<h2 id="graphql-code-generator">GraphQL Code Generator</h2>



<p class="selectionShareable">We will start from writing GraphQL queries and generating TypeScript types and HOCs based on these queries.</p>



<p class="selectionShareable">The queries will look like this:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0">// front/src/views/Notes/queries.ts</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> gql from </span><span class="enlighter-s0">'graphql-tag'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">export</span><span class="enlighter-text"> </span><span class="enlighter-k2">const</span><span class="enlighter-text"> NOTES_QUERY = gql</span><span class="enlighter-s2">`</span></div></div><div class=""><div><span class="enlighter-s2">    query NotesQuery($search: String) {</span></div></div><div class=""><div><span class="enlighter-s2">        notes(search: $search) {</span></div></div><div class=""><div><span class="enlighter-s2">            edges {</span></div></div><div class=""><div><span class="enlighter-s2">                node {</span></div></div><div class=""><div><span class="enlighter-s2">                    id</span></div></div><div class=""><div><span class="enlighter-s2">                    title</span></div></div><div class=""><div><span class="enlighter-s2">                    body</span></div></div><div class=""><div><span class="enlighter-s2">                }</span></div></div><div class=""><div><span class="enlighter-s2">            }</span></div></div><div class=""><div><span class="enlighter-s2">        }</span></div></div><div class=""><div><span class="enlighter-s2">    }</span></div></div><div class=""><div><span class="enlighter-s2">`</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">export</span><span class="enlighter-text"> </span><span class="enlighter-k2">const</span><span class="enlighter-text"> NOTE_CREATE_MUTATION = gql</span><span class="enlighter-s2">`</span></div></div><div class=""><div><span class="enlighter-s2">    mutation NoteCreateMutation($input: NoteInputType!) {</span></div></div><div class=""><div><span class="enlighter-s2">        noteCreate(input: $input) {</span></div></div><div class=""><div><span class="enlighter-s2">            note {</span></div></div><div class=""><div><span class="enlighter-s2">                id</span></div></div><div class=""><div><span class="enlighter-s2">            }</span></div></div><div class=""><div><span class="enlighter-s2">        }</span></div></div><div class=""><div><span class="enlighter-s2">    }</span></div></div><div class=""><div><span class="enlighter-s2">`</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">export</span><span class="enlighter-text"> </span><span class="enlighter-k2">const</span><span class="enlighter-text"> NOTE_DELETE_MUTATION = gql</span><span class="enlighter-s2">`</span></div></div><div class=""><div><span class="enlighter-s2">    mutation NoteDeleteMutation($id: ID!) {</span></div></div><div class=""><div><span class="enlighter-s2">        noteDelete(id: $id) {</span></div></div><div class=""><div><span class="enlighter-s2">            ok</span></div></div><div class=""><div><span class="enlighter-s2">        }</span></div></div><div class=""><div><span class="enlighter-s2">    }</span></div></div><div class=""><div><span class="enlighter-s2">`</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">// front/src/views/Notes/queries.ts

import gql from 'graphql-tag';

export const NOTES_QUERY = gql`
    query NotesQuery($search: String) {
        notes(search: $search) {
            edges {
                node {
                    id
                    title
                    body
                }
            }
        }
    }
`;

export const NOTE_CREATE_MUTATION = gql`
    mutation NoteCreateMutation($input: NoteInputType!) {
        noteCreate(input: $input) {
            note {
                id
            }
        }
    }
`;

export const NOTE_DELETE_MUTATION = gql`
    mutation NoteDeleteMutation($id: ID!) {
        noteDelete(id: $id) {
            ok
        }
    }
`;</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="js" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// front/src/views/Notes/queries.ts

import gql from 'graphql-tag';

export const NOTES_QUERY = gql`
    query NotesQuery($search: String) {
        notes(search: $search) {
            edges {
                node {
                    id
                    title
                    body
                }
            }
        }
    }
`;

export const NOTE_CREATE_MUTATION = gql`
    mutation NoteCreateMutation($input: NoteInputType!) {
        noteCreate(input: $input) {
            note {
                id
            }
        }
    }
`;

export const NOTE_DELETE_MUTATION = gql`
    mutation NoteDeleteMutation($id: ID!) {
        noteDelete(id: $id) {
            ok
        }
    }
`;</pre>



<p class="selectionShareable">Before generating types and HOCs using graphql code generator library, we should create <code>codegen.yml</code> file which is basically the settings file for the library:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0"># front/codegen.yml</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">overwrite: </span><span class="enlighter-k1">true</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">schema: </span><span class="enlighter-s0">"&lt;http://localhost:8000/graphql/&gt;"</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">documents: </span><span class="enlighter-s0">"src/**/*.ts"</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">generates:</span></div></div><div class=""><div><span class="enlighter-text">  ./src/generatedModels.</span><span class="enlighter-m3">tsx</span><span class="enlighter-text">:</span></div></div><div class=""><div><span class="enlighter-text">    config: </span><span class="enlighter-g1">{}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    plugins:</span></div></div><div class=""><div><span class="enlighter-text">      - </span><span class="enlighter-s0">"typescript-common"</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">      - </span><span class="enlighter-s0">"typescript-client"</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">      - </span><span class="enlighter-s0">"typescript-react-apollo"</span></div></div></div><div class="enlighter-raw"># front/codegen.yml

overwrite: true
schema: "&lt;http://localhost:8000/graphql/&gt;"
documents: "src/**/*.ts"
generates:
  ./src/generatedModels.tsx:
    config: {}
    plugins:
      - "typescript-common"
      - "typescript-client"
      - "typescript-react-apollo"</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># front/codegen.yml

overwrite: true
schema: "&lt;http://localhost:8000/graphql/&gt;"
documents: "src/**/*.ts"
generates:
  ./src/generatedModels.tsx:
    config: {}
    plugins:
      - "typescript-common"
      - "typescript-client"
      - "typescript-react-apollo"</pre>



<p class="selectionShareable">Now let’s run a command that will generate code for us:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-text">$ yarn gql-gen --config codegen.</span><span class="enlighter-m3">yml</span></div></div></div><div class="enlighter-raw">$ yarn gql-gen --config codegen.yml</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">$ yarn gql-gen --config codegen.yml</pre>



<p class="selectionShareable">Some of the generated code looks like this:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k0">export</span><span class="enlighter-text"> </span><span class="enlighter-k0">namespace</span><span class="enlighter-text"> NotesQuery </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k0">export</span><span class="enlighter-text"> </span><span class="enlighter-k2">const</span><span class="enlighter-text"> Document = gql</span><span class="enlighter-s2">`</span></div></div><div class=""><div><span class="enlighter-s2">    query NotesQuery($search: String) {</span></div></div><div class=""><div><span class="enlighter-s2">      notes(search: $search) {</span></div></div><div class=""><div><span class="enlighter-s2">        edges {</span></div></div><div class=""><div><span class="enlighter-s2">          node {</span></div></div><div class=""><div><span class="enlighter-s2">            id</span></div></div><div class=""><div><span class="enlighter-s2">            title</span></div></div><div class=""><div><span class="enlighter-s2">            body</span></div></div><div class=""><div><span class="enlighter-s2">          }</span></div></div><div class=""><div><span class="enlighter-s2">        }</span></div></div><div class=""><div><span class="enlighter-s2">      }</span></div></div><div class=""><div><span class="enlighter-s2">    }</span></div></div><div class=""><div><span class="enlighter-s2">  `</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k0">export</span><span class="enlighter-text"> </span><span class="enlighter-k2">type</span><span class="enlighter-text"> </span><span class="enlighter-m0">Props</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">TChildProps = </span><span class="enlighter-k5">any</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> = </span><span class="enlighter-m0">Partial</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    ReactApollo.</span><span class="enlighter-m0">DataProps</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Query, Variables</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> &amp;</span></div></div><div class=""><div><span class="enlighter-text">    TChildProps;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-k0">export</span><span class="enlighter-text"> </span><span class="enlighter-k0">function</span><span class="enlighter-text"> </span><span class="enlighter-m0">HOC</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">TProps, TChildProps = </span><span class="enlighter-k5">any</span><span class="enlighter-g1">&gt;</span><span class="enlighter-g1">(</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    operationOptions:</span></div></div><div class=""><div><span class="enlighter-text">      | ReactApollo.</span><span class="enlighter-m0">OperationOption</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">          TProps,</span></div></div><div class=""><div><span class="enlighter-text">          Query,</span></div></div><div class=""><div><span class="enlighter-text">          Variables,</span></div></div><div class=""><div><span class="enlighter-text">          </span><span class="enlighter-m0">Props</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">TChildProps</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">      | </span><span class="enlighter-k5">undefined</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">return</span><span class="enlighter-text"> ReactApollo.</span><span class="enlighter-m0">graphql</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">TProps, Query, Variables, </span><span class="enlighter-m0">Props</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">TChildProps</span><span class="enlighter-g1">&gt;</span><span class="enlighter-g1">&gt;</span><span class="enlighter-g1">(</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">      Document,</span></div></div><div class=""><div><span class="enlighter-text">      operationOptions</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">  </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw">export namespace NotesQuery {
  export const Document = gql`
    query NotesQuery($search: String) {
      notes(search: $search) {
        edges {
          node {
            id
            title
            body
          }
        }
      }
    }
  `;
  export type Props&lt;TChildProps = any&gt; = Partial&lt;
    ReactApollo.DataProps&lt;Query, Variables&gt;
  &gt; &amp;
    TChildProps;
  export function HOC&lt;TProps, TChildProps = any&gt;(
    operationOptions:
      | ReactApollo.OperationOption&lt;
          TProps,
          Query,
          Variables,
          Props&lt;TChildProps&gt;
        &gt;
      | undefined
  ) {
    return ReactApollo.graphql&lt;TProps, Query, Variables, Props&lt;TChildProps&gt;&gt;(
      Document,
      operationOptions
    );
  }
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="js" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">export namespace NotesQuery {
  export const Document = gql`
    query NotesQuery($search: String) {
      notes(search: $search) {
        edges {
          node {
            id
            title
            body
          }
        }
      }
    }
  `;
  export type Props&lt;TChildProps = any&gt; = Partial&lt;
    ReactApollo.DataProps&lt;Query, Variables&gt;
  &gt; &amp;
    TChildProps;
  export function HOC&lt;TProps, TChildProps = any&gt;(
    operationOptions:
      | ReactApollo.OperationOption&lt;
          TProps,
          Query,
          Variables,
          Props&lt;TChildProps&gt;
        &gt;
      | undefined
  ) {
    return ReactApollo.graphql&lt;TProps, Query, Variables, Props&lt;TChildProps&gt;&gt;(
      Document,
      operationOptions
    );
  }
}</pre>



<p class="selectionShareable">Seems confusing at first, but you don’t need to understand everything. What we have here is:</p>



<ul><li><strong>Document</strong> which is a query itself.</li><li><strong>Generated Props</strong> which will help us to type component props.</li><li><strong>Generated HOC</strong> which can be used like this:</li></ul>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k2">const</span><span class="enlighter-text"> withNotes = NotesQuery.</span><span class="enlighter-m3">HOC</span><span class="enlighter-g1">(</span><span class="enlighter-text">...</span><span class="enlighter-g1">)</span></div></div></div><div class="enlighter-raw">const withNotes = NotesQuery.HOC(...)</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="js" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">const withNotes = NotesQuery.HOC(...)</pre>



<h2 id="react-components">React components</h2>



<p class="selectionShareable">Let’s create Apollo Client and connect it to React using <strong>Apollo Provider</strong>. Apollo Provider will place client to context, which allows us to access the client from anywhere in our component tree:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> InMemoryCache </span><span class="enlighter-g1">}</span><span class="enlighter-text"> from </span><span class="enlighter-s0">'apollo-cache-inmemory'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> ApolloClient </span><span class="enlighter-g1">}</span><span class="enlighter-text"> from </span><span class="enlighter-s0">'apollo-client'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> createHttpLink </span><span class="enlighter-g1">}</span><span class="enlighter-text"> from </span><span class="enlighter-s0">'apollo-link-http'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> * </span><span class="enlighter-k0">as</span><span class="enlighter-text"> React from </span><span class="enlighter-s0">'react'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> ApolloProvider </span><span class="enlighter-g1">}</span><span class="enlighter-text"> from </span><span class="enlighter-s0">'react-apollo'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> * </span><span class="enlighter-k0">as</span><span class="enlighter-text"> ReactDOM from </span><span class="enlighter-s0">'react-dom'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> App from </span><span class="enlighter-s0">'./App'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-s0">'./index.css'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> registerServiceWorker from </span><span class="enlighter-s0">'./registerServiceWorker'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k2">const</span><span class="enlighter-text"> httpLink = </span><span class="enlighter-m0">createHttpLink</span><span class="enlighter-g1">(</span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    uri: </span><span class="enlighter-s0">'&lt;http://localhost:8000/graphql/&gt;'</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k2">const</span><span class="enlighter-text"> client = </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">ApolloClient</span><span class="enlighter-g1">(</span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    cache: </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">InMemoryCache</span><span class="enlighter-g1">(</span><span class="enlighter-g1">)</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">    link: httpLink,</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">ReactDOM.</span><span class="enlighter-m3">render</span><span class="enlighter-g1">(</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">ApolloProvider client=</span><span class="enlighter-g1">{</span><span class="enlighter-text">client</span><span class="enlighter-g1">}</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">App </span><span class="enlighter-e2">/&gt;</span></div></div><div class=""><div><span class="enlighter-e2">    &lt;/ApolloProvider</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k9">document</span><span class="enlighter-text">.</span><span class="enlighter-m3">getElementById</span><span class="enlighter-g1">(</span><span class="enlighter-s0">'root'</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-k0">as</span><span class="enlighter-text"> HTMLElement</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-m0">registerServiceWorker</span><span class="enlighter-g1">(</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">import { InMemoryCache } from 'apollo-cache-inmemory';
import { ApolloClient } from 'apollo-client';
import { createHttpLink } from 'apollo-link-http';
import * as React from 'react';
import { ApolloProvider } from 'react-apollo';
import * as ReactDOM from 'react-dom';
import App from './App';
import './index.css';
import registerServiceWorker from './registerServiceWorker';

const httpLink = createHttpLink({
    uri: '&lt;http://localhost:8000/graphql/&gt;',
});

const client = new ApolloClient({
    cache: new InMemoryCache(),
    link: httpLink,
});

ReactDOM.render(
    &lt;ApolloProvider client={client}&gt;
        &lt;App /&gt;
    &lt;/ApolloProvider&gt;,
    document.getElementById('root') as HTMLElement
);
registerServiceWorker();</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="js" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">import { InMemoryCache } from 'apollo-cache-inmemory';
import { ApolloClient } from 'apollo-client';
import { createHttpLink } from 'apollo-link-http';
import * as React from 'react';
import { ApolloProvider } from 'react-apollo';
import * as ReactDOM from 'react-dom';
import App from './App';
import './index.css';
import registerServiceWorker from './registerServiceWorker';

const httpLink = createHttpLink({
    uri: '&lt;http://localhost:8000/graphql/&gt;',
});

const client = new ApolloClient({
    cache: new InMemoryCache(),
    link: httpLink,
});

ReactDOM.render(
    &lt;ApolloProvider client={client}&gt;
        &lt;App /&gt;
    &lt;/ApolloProvider&gt;,
    document.getElementById('root') as HTMLElement
);
registerServiceWorker();</pre>



<p class="selectionShareable">Before going further let’s make our UI pretty by adding antd styles:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c1">/* front/src/index.css */</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">@import </span><span class="enlighter-s0">'~antd/dist/antd.css'</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">/* front/src/index.css */
@import '~antd/dist/antd.css';</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">/* front/src/index.css */
@import '~antd/dist/antd.css';</pre>



<p class="selectionShareable">Now let’s create <code>Notes</code> view. I’ve tried to explain tricky parts in the comments:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0">// front/src/views/Notes/index.tsx</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> Card, Col, Divider, Icon, Input, Row, Spin </span><span class="enlighter-g1">}</span><span class="enlighter-text"> from </span><span class="enlighter-s0">'antd'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> * </span><span class="enlighter-k0">as</span><span class="enlighter-text"> queryString from </span><span class="enlighter-s0">'query-string'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> * </span><span class="enlighter-k0">as</span><span class="enlighter-text"> React from </span><span class="enlighter-s0">'react'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> compose, withApollo </span><span class="enlighter-g1">}</span><span class="enlighter-text"> from </span><span class="enlighter-s0">'react-apollo'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> RouteComponentProps, withRouter </span><span class="enlighter-g1">}</span><span class="enlighter-text"> from </span><span class="enlighter-s0">'react-router'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> NoteDeleteMutation, NotesQuery </span><span class="enlighter-g1">}</span><span class="enlighter-text"> from </span><span class="enlighter-s0">'../../generatedModels'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> CreateNoteForm from </span><span class="enlighter-s0">'./CreateNoteForm'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k2">interface</span><span class="enlighter-text"> INotesState </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    searchQuery?: </span><span class="enlighter-k5">string</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k2">interface</span><span class="enlighter-text"> INotesBaseProps </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    deleteNote: NoteDeleteMutation.</span><span class="enlighter-m3">MutationFn</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k2">type</span><span class="enlighter-text"> INotesProps = NotesQuery.</span><span class="enlighter-m0">Props</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">INotesBaseProps</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> &amp; RouteComponentProps;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> Notes </span><span class="enlighter-k0">extends</span><span class="enlighter-text"> React.</span><span class="enlighter-m0">Component</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">INotesProps, INotesState</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">constructor</span><span class="enlighter-g1">(</span><span class="enlighter-text">props: INotesProps</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k9">super</span><span class="enlighter-g1">(</span><span class="enlighter-text">props</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">       </span><span class="enlighter-c0"> // parsing ?search=something to { search: 'something' }</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k2">const</span><span class="enlighter-text"> query = queryString.</span><span class="enlighter-m3">parse</span><span class="enlighter-g1">(</span><span class="enlighter-text">props.</span><span class="enlighter-m3">location</span><span class="enlighter-text">.</span><span class="enlighter-m3">search</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k9">this</span><span class="enlighter-text">.</span><span class="enlighter-m3">state</span><span class="enlighter-text"> = </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            searchQuery: query &amp;&amp; query.</span><span class="enlighter-m3">search</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                ? query.</span><span class="enlighter-m3">search</span><span class="enlighter-text">.</span><span class="enlighter-m3">toString</span><span class="enlighter-g1">(</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                : </span><span class="enlighter-k5">undefined</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-m0">render</span><span class="enlighter-g1">(</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k2">const</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> searchQuery </span><span class="enlighter-g1">}</span><span class="enlighter-text"> = </span><span class="enlighter-k9">this</span><span class="enlighter-text">.</span><span class="enlighter-m3">state</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k2">const</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> data </span><span class="enlighter-g1">}</span><span class="enlighter-text"> = </span><span class="enlighter-k9">this</span><span class="enlighter-text">.</span><span class="enlighter-m3">props</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Row</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Col span=</span><span class="enlighter-g1">{</span><span class="enlighter-n1">12</span><span class="enlighter-g1">}</span><span class="enlighter-text"> offset=</span><span class="enlighter-g1">{</span><span class="enlighter-n1">6</span><span class="enlighter-g1">}</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                    </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Divider</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text">Create </span><span class="enlighter-m0">Note</span><span class="enlighter-g1">&lt;</span><span class="enlighter-e2">/Divider&gt;</span></div></div><div class=""><div><span class="enlighter-e2">                    &lt;CreateNoteForm</span></div></div><div class=""><div><span class="enlighter-e2">                        onSuccess={this.handleCreateNoteFormSuccess}</span></div></div><div class=""><div><span class="enlighter-e2">                    /</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                    </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Divider</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">Notes</span><span class="enlighter-g1">&lt;</span><span class="enlighter-e2">/Divider&gt;</span></div></div><div class=""><div><span class="enlighter-e2">                    &lt;Input.Search</span></div></div><div class=""><div><span class="enlighter-e2">                        placeholder="Search..."</span></div></div><div class=""><div><span class="enlighter-e2">                        enterButton="Search"</span></div></div><div class=""><div><span class="enlighter-e2">                        defaultValue={searchQuery}</span></div></div><div class=""><div><span class="enlighter-e2">                        onChange={this.handleSearchQueryChange}</span></div></div><div class=""><div><span class="enlighter-e2">                        onSearch={this.handleSearch}</span></div></div><div class=""><div><span class="enlighter-e2">                    /</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                    </span><span class="enlighter-g1">{</span><span class="enlighter-text">data!.loading ? </span><span class="enlighter-g1">(</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                        </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Spin style=</span><span class="enlighter-g1">{</span><span class="enlighter-g1">{</span><span class="enlighter-text"> marginTop: </span><span class="enlighter-n1">16</span><span class="enlighter-text">, display: </span><span class="enlighter-s0">'block'</span><span class="enlighter-text"> </span><span class="enlighter-g1">}</span><span class="enlighter-g1">}</span><span class="enlighter-text"> </span><span class="enlighter-e2">/&gt;</span></div></div><div class=""><div><span class="enlighter-e2">                    ) : (</span></div></div><div class=""><div><span class="enlighter-e2">                        &lt;div&gt;</span></div></div><div class=""><div><span class="enlighter-e2">                            {data!.notes!.edges.map(edge =&gt; (</span></div></div><div class=""><div><span class="enlighter-e2">                                &lt;Card</span></div></div><div class=""><div><span class="enlighter-e2">                                    key={edge!.node!.id}</span></div></div><div class=""><div><span class="enlighter-e2">                                    style={{ marginTop: 16 }}</span></div></div><div class=""><div><span class="enlighter-e2">                                    actions={[</span></div></div><div class=""><div><span class="enlighter-e2">                                        &lt;Icon</span></div></div><div class=""><div><span class="enlighter-e2">                                            type="delete"</span></div></div><div class=""><div><span class="enlighter-e2">                                            key={edge!.node!.id}</span></div></div><div class=""><div><span class="enlighter-e2">                                            onClick={() =&gt; this.handleDeleteNote(edge!.node!.id)}</span></div></div><div class=""><div><span class="enlighter-e2">                                        /</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                                    </span><span class="enlighter-g1">]</span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                                </span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                                    </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Card.</span><span class="enlighter-m3">Meta</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                                        title=</span><span class="enlighter-g1">{</span><span class="enlighter-text">edge!.node!.title</span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                                        description=</span><span class="enlighter-g1">{</span><span class="enlighter-text">edge!.node!.body</span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                                    </span><span class="enlighter-e2">/&gt;</span></div></div><div class=""><div><span class="enlighter-e2">                                &lt;/Card</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                            </span><span class="enlighter-g1">)</span><span class="enlighter-g1">)</span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                        </span><span class="enlighter-g1">&lt;</span><span class="enlighter-e2">/div&gt;</span></div></div><div class=""><div><span class="enlighter-e2">                    )}</span></div></div><div class=""><div><span class="enlighter-e2">                &lt;/Col</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-g1">&lt;</span><span class="enlighter-e2">/Row&gt;</span></div></div><div class=""><div><span class="enlighter-e2">        );</span></div></div><div class=""><div><span class="enlighter-e2">    }</span></div></div><div class=""><div><span class="enlighter-e2"></span></div></div><div class=""><div><span class="enlighter-e2">    private handleSearchQueryChange = (event: any) =&gt; {</span></div></div><div class=""><div><span class="enlighter-e2">        this.setState({</span></div></div><div class=""><div><span class="enlighter-e2">            searchQuery: event.target.value || undefined</span></div></div><div class=""><div><span class="enlighter-e2">        });</span></div></div><div class=""><div><span class="enlighter-e2">    };</span></div></div><div class=""><div><span class="enlighter-e2"></span></div></div><div class=""><div><span class="enlighter-e2">    private handleSearch = () =&gt; {</span></div></div><div class=""><div><span class="enlighter-e2">        const { searchQuery } = this.state;</span></div></div><div class=""><div><span class="enlighter-e2">        const { history, location } = this.props;</span></div></div><div class=""><div><span class="enlighter-e2"></span></div></div><div class=""><div><span class="enlighter-e2">        /</span><span class="enlighter-text">/ Here we're updating our url after clicking </span><span class="enlighter-s2">`Search`</span><span class="enlighter-text"> button.</span></div></div><div class=""><div><span class="enlighter-text">       </span><span class="enlighter-c0"> // For example, when we type `food` into seach input, our url</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">       </span><span class="enlighter-c0"> // will transform from `http://localhost:3000/` to</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">       </span><span class="enlighter-c0"> // `http://localhost:3000/?search=food`</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        history.</span><span class="enlighter-m3">push</span><span class="enlighter-g1">(</span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            pathname: location.</span><span class="enlighter-m3">pathname</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">           </span><span class="enlighter-c0"> // parsing { search: searchQuery } to ?search=searchQuery</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            search: queryString.</span><span class="enlighter-m3">stringify</span><span class="enlighter-g1">(</span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                search: searchQuery</span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">private</span><span class="enlighter-text"> handleCreateNoteFormSuccess = </span><span class="enlighter-g1">(</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-k3">=&gt;</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k2">const</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> data </span><span class="enlighter-g1">}</span><span class="enlighter-text"> = </span><span class="enlighter-k9">this</span><span class="enlighter-text">.</span><span class="enlighter-m3">props</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k0">return</span><span class="enlighter-text"> data!.</span><span class="enlighter-m1">refetch</span><span class="enlighter-g1">(</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">private</span><span class="enlighter-text"> handleDeleteNote = </span><span class="enlighter-g1">(</span><span class="enlighter-text">id: </span><span class="enlighter-k5">string</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-k3">=&gt;</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k2">const</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> data, deleteNote </span><span class="enlighter-g1">}</span><span class="enlighter-text"> = </span><span class="enlighter-k9">this</span><span class="enlighter-text">.</span><span class="enlighter-m3">props</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">deleteNote</span><span class="enlighter-g1">(</span><span class="enlighter-g1">{</span><span class="enlighter-text"> variables: </span><span class="enlighter-g1">{</span><span class="enlighter-text"> id </span><span class="enlighter-g1">}</span><span class="enlighter-text"> </span><span class="enlighter-g1">}</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            .</span><span class="enlighter-m1">then</span><span class="enlighter-g1">(</span><span class="enlighter-g1">(</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-k3">=&gt;</span><span class="enlighter-text"> data!.</span><span class="enlighter-m1">refetch</span><span class="enlighter-g1">(</span><span class="enlighter-g1">)</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">export</span><span class="enlighter-text"> </span><span class="enlighter-k0">default</span><span class="enlighter-text"> </span><span class="enlighter-m0">compose</span><span class="enlighter-g1">(</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    withApollo,</span></div></div><div class=""><div><span class="enlighter-text">    withRouter,</span></div></div><div class=""><div><span class="enlighter-text">    NotesQuery.</span><span class="enlighter-m3">HOC</span><span class="enlighter-g1">(</span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        options: </span><span class="enlighter-g1">(</span><span class="enlighter-text">props: INotesProps</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-k3">=&gt;</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            variables: queryString.</span><span class="enlighter-m3">parse</span><span class="enlighter-g1">(</span><span class="enlighter-text">props.</span><span class="enlighter-m3">location</span><span class="enlighter-text">.</span><span class="enlighter-m3">search</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-g1">)</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">    NoteDeleteMutation.</span><span class="enlighter-m3">HOC</span><span class="enlighter-g1">(</span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        props: </span><span class="enlighter-g1">(</span><span class="enlighter-g1">{</span><span class="enlighter-text"> mutate </span><span class="enlighter-g1">}</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-k3">=&gt;</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">           </span><span class="enlighter-c0"> // renaming mutation from `mutate` to `deleteNote`</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">           </span><span class="enlighter-c0"> // (more readable)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">           </span><span class="enlighter-c0"> // and passing it to props</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            deleteNote: mutate</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">)</span><span class="enlighter-g1">(</span><span class="enlighter-text">Notes</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">// front/src/views/Notes/index.tsx

import { Card, Col, Divider, Icon, Input, Row, Spin } from 'antd';
import * as queryString from 'query-string';
import * as React from 'react';
import { compose, withApollo } from 'react-apollo';
import { RouteComponentProps, withRouter } from 'react-router';
import { NoteDeleteMutation, NotesQuery } from '../../generatedModels';
import CreateNoteForm from './CreateNoteForm';

interface INotesState {
    searchQuery?: string;
}

interface INotesBaseProps {
    deleteNote: NoteDeleteMutation.MutationFn;
}

type INotesProps = NotesQuery.Props&lt;INotesBaseProps&gt; &amp; RouteComponentProps;

class Notes extends React.Component&lt;INotesProps, INotesState&gt; {
    constructor(props: INotesProps) {
        super(props);
        // parsing ?search=something to { search: 'something' }
        const query = queryString.parse(props.location.search);
        this.state = {
            searchQuery: query &amp;&amp; query.search
                ? query.search.toString()
                : undefined
        };
    }

    public render() {
        const { searchQuery } = this.state;
        const { data } = this.props;

        return (
            &lt;Row&gt;
                &lt;Col span={12} offset={6}&gt;
                    &lt;Divider&gt;Create Note&lt;/Divider&gt;
                    &lt;CreateNoteForm
                        onSuccess={this.handleCreateNoteFormSuccess}
                    /&gt;
                    &lt;Divider&gt;Notes&lt;/Divider&gt;
                    &lt;Input.Search
                        placeholder="Search..."
                        enterButton="Search"
                        defaultValue={searchQuery}
                        onChange={this.handleSearchQueryChange}
                        onSearch={this.handleSearch}
                    /&gt;
                    {data!.loading ? (
                        &lt;Spin style={{ marginTop: 16, display: 'block' }} /&gt;
                    ) : (
                        &lt;div&gt;
                            {data!.notes!.edges.map(edge =&gt; (
                                &lt;Card
                                    key={edge!.node!.id}
                                    style={{ marginTop: 16 }}
                                    actions={[
                                        &lt;Icon
                                            type="delete"
                                            key={edge!.node!.id}
                                            onClick={() =&gt; this.handleDeleteNote(edge!.node!.id)}
                                        /&gt;
                                    ]}
                                &gt;
                                    &lt;Card.Meta
                                        title={edge!.node!.title}
                                        description={edge!.node!.body}
                                    /&gt;
                                &lt;/Card&gt;
                            ))}
                        &lt;/div&gt;
                    )}
                &lt;/Col&gt;
            &lt;/Row&gt;
        );
    }

    private handleSearchQueryChange = (event: any) =&gt; {
        this.setState({
            searchQuery: event.target.value || undefined
        });
    };

    private handleSearch = () =&gt; {
        const { searchQuery } = this.state;
        const { history, location } = this.props;

        // Here we're updating our url after clicking `Search` button.
        // For example, when we type `food` into seach input, our url
        // will transform from `http://localhost:3000/` to
        // `http://localhost:3000/?search=food`
        history.push({
            pathname: location.pathname,
            // parsing { search: searchQuery } to ?search=searchQuery
            search: queryString.stringify({
                search: searchQuery
            })
        });
    };

    private handleCreateNoteFormSuccess = () =&gt; {
        const { data } = this.props;
        return data!.refetch();
    };

    private handleDeleteNote = (id: string) =&gt; {
        const { data, deleteNote } = this.props;
        return deleteNote({ variables: { id } })
            .then(() =&gt; data!.refetch());
    };
}

export default compose(
    withApollo,
    withRouter,
    NotesQuery.HOC({
        options: (props: INotesProps) =&gt; ({
            variables: queryString.parse(props.location.search)
        })
    }),
    NoteDeleteMutation.HOC({
        props: ({ mutate }) =&gt; ({
            // renaming mutation from `mutate` to `deleteNote`
            // (more readable)
            // and passing it to props
            deleteNote: mutate
        })
    })
)(Notes);</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="js" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// front/src/views/Notes/index.tsx

import { Card, Col, Divider, Icon, Input, Row, Spin } from 'antd';
import * as queryString from 'query-string';
import * as React from 'react';
import { compose, withApollo } from 'react-apollo';
import { RouteComponentProps, withRouter } from 'react-router';
import { NoteDeleteMutation, NotesQuery } from '../../generatedModels';
import CreateNoteForm from './CreateNoteForm';

interface INotesState {
    searchQuery?: string;
}

interface INotesBaseProps {
    deleteNote: NoteDeleteMutation.MutationFn;
}

type INotesProps = NotesQuery.Props&lt;INotesBaseProps&gt; &amp; RouteComponentProps;

class Notes extends React.Component&lt;INotesProps, INotesState&gt; {
    constructor(props: INotesProps) {
        super(props);
        // parsing ?search=something to { search: 'something' }
        const query = queryString.parse(props.location.search);
        this.state = {
            searchQuery: query &amp;&amp; query.search
                ? query.search.toString()
                : undefined
        };
    }

    public render() {
        const { searchQuery } = this.state;
        const { data } = this.props;

        return (
            &lt;Row&gt;
                &lt;Col span={12} offset={6}&gt;
                    &lt;Divider&gt;Create Note&lt;/Divider&gt;
                    &lt;CreateNoteForm
                        onSuccess={this.handleCreateNoteFormSuccess}
                    /&gt;
                    &lt;Divider&gt;Notes&lt;/Divider&gt;
                    &lt;Input.Search
                        placeholder="Search..."
                        enterButton="Search"
                        defaultValue={searchQuery}
                        onChange={this.handleSearchQueryChange}
                        onSearch={this.handleSearch}
                    /&gt;
                    {data!.loading ? (
                        &lt;Spin style={{ marginTop: 16, display: 'block' }} /&gt;
                    ) : (
                        &lt;div&gt;
                            {data!.notes!.edges.map(edge =&gt; (
                                &lt;Card
                                    key={edge!.node!.id}
                                    style={{ marginTop: 16 }}
                                    actions={[
                                        &lt;Icon
                                            type="delete"
                                            key={edge!.node!.id}
                                            onClick={() =&gt; this.handleDeleteNote(edge!.node!.id)}
                                        /&gt;
                                    ]}
                                &gt;
                                    &lt;Card.Meta
                                        title={edge!.node!.title}
                                        description={edge!.node!.body}
                                    /&gt;
                                &lt;/Card&gt;
                            ))}
                        &lt;/div&gt;
                    )}
                &lt;/Col&gt;
            &lt;/Row&gt;
        );
    }

    private handleSearchQueryChange = (event: any) =&gt; {
        this.setState({
            searchQuery: event.target.value || undefined
        });
    };

    private handleSearch = () =&gt; {
        const { searchQuery } = this.state;
        const { history, location } = this.props;

        // Here we're updating our url after clicking `Search` button.
        // For example, when we type `food` into seach input, our url
        // will transform from `http://localhost:3000/` to
        // `http://localhost:3000/?search=food`
        history.push({
            pathname: location.pathname,
            // parsing { search: searchQuery } to ?search=searchQuery
            search: queryString.stringify({
                search: searchQuery
            })
        });
    };

    private handleCreateNoteFormSuccess = () =&gt; {
        const { data } = this.props;
        return data!.refetch();
    };

    private handleDeleteNote = (id: string) =&gt; {
        const { data, deleteNote } = this.props;
        return deleteNote({ variables: { id } })
            .then(() =&gt; data!.refetch());
    };
}

export default compose(
    withApollo,
    withRouter,
    NotesQuery.HOC({
        options: (props: INotesProps) =&gt; ({
            variables: queryString.parse(props.location.search)
        })
    }),
    NoteDeleteMutation.HOC({
        props: ({ mutate }) =&gt; ({
            // renaming mutation from `mutate` to `deleteNote`
            // (more readable)
            // and passing it to props
            deleteNote: mutate
        })
    })
)(Notes);</pre>



<p class="selectionShareable"><code>CreateNoteForm</code> component looks like this:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0">// front/src/views/Notes/CreteNoteForm.tsx</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> Button, Form, Input </span><span class="enlighter-g1">}</span><span class="enlighter-text"> from </span><span class="enlighter-s0">'antd'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> * </span><span class="enlighter-k0">as</span><span class="enlighter-text"> React from </span><span class="enlighter-s0">'react'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> compose, withApollo </span><span class="enlighter-g1">}</span><span class="enlighter-text"> from </span><span class="enlighter-s0">'react-apollo'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> NoteCreateMutation </span><span class="enlighter-g1">}</span><span class="enlighter-text"> from </span><span class="enlighter-s0">'../../generatedModels'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k2">interface</span><span class="enlighter-text"> ICreateNoteFormState </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    noteBody: </span><span class="enlighter-k5">string</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    noteTitle: </span><span class="enlighter-k5">string</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k2">interface</span><span class="enlighter-text"> ICreateNoteFormProps </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    createNote: NoteCreateMutation.</span><span class="enlighter-m3">MutationFn</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    onSuccess: </span><span class="enlighter-g1">(</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-k3">=&gt;</span><span class="enlighter-text"> </span><span class="enlighter-k5">any</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> CreateNoteForm </span><span class="enlighter-k0">extends</span><span class="enlighter-text"> React.</span><span class="enlighter-m0">Component</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">ICreateNoteFormProps, ICreateNoteFormState</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">public</span><span class="enlighter-text"> state: ICreateNoteFormState = </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        noteBody: </span><span class="enlighter-s0">''</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">        noteTitle: </span><span class="enlighter-s0">''</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-m0">render</span><span class="enlighter-g1">(</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k2">const</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> noteBody, noteTitle </span><span class="enlighter-g1">}</span><span class="enlighter-text"> = </span><span class="enlighter-k9">this</span><span class="enlighter-text">.</span><span class="enlighter-m3">state</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Form onSubmit=</span><span class="enlighter-g1">{</span><span class="enlighter-k9">this</span><span class="enlighter-text">.</span><span class="enlighter-m3">handleSubmit</span><span class="enlighter-g1">}</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Form.</span><span class="enlighter-m3">Item</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                    </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Input</span></div></div><div class=""><div><span class="enlighter-text">                        placeholder=</span><span class="enlighter-s0">"Title"</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                        value=</span><span class="enlighter-g1">{</span><span class="enlighter-text">noteTitle</span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                        onChange=</span><span class="enlighter-g1">{</span><span class="enlighter-k9">this</span><span class="enlighter-text">.</span><span class="enlighter-m3">handleNoteTitleChange</span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                    </span><span class="enlighter-e2">/&gt;</span></div></div><div class=""><div><span class="enlighter-e2">                &lt;/Form</span><span class="enlighter-text">.</span><span class="enlighter-m3">Item</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Form.</span><span class="enlighter-m3">Item</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                    </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Input.</span><span class="enlighter-m3">TextArea</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                        placeholder=</span><span class="enlighter-s0">"Body"</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                        value=</span><span class="enlighter-g1">{</span><span class="enlighter-text">noteBody</span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                        onChange=</span><span class="enlighter-g1">{</span><span class="enlighter-k9">this</span><span class="enlighter-text">.</span><span class="enlighter-m3">handleNoteBodyChange</span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                    </span><span class="enlighter-e2">/&gt;</span></div></div><div class=""><div><span class="enlighter-e2">                &lt;/Form</span><span class="enlighter-text">.</span><span class="enlighter-m3">Item</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Form.</span><span class="enlighter-m3">Item</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                    </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Button </span><span class="enlighter-k2">type</span><span class="enlighter-text">=</span><span class="enlighter-s0">"primary"</span><span class="enlighter-text"> htmlType=</span><span class="enlighter-s0">"submit"</span><span class="enlighter-g1">&gt;</span><span class="enlighter-m0">Create</span><span class="enlighter-g1">&lt;</span><span class="enlighter-e2">/Button&gt;</span></div></div><div class=""><div><span class="enlighter-e2">                &lt;/Form</span><span class="enlighter-text">.</span><span class="enlighter-m3">Item</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-g1">&lt;</span><span class="enlighter-e2">/Form&gt;</span></div></div><div class=""><div><span class="enlighter-e2">        );</span></div></div><div class=""><div><span class="enlighter-e2">    }</span></div></div><div class=""><div><span class="enlighter-e2"></span></div></div><div class=""><div><span class="enlighter-e2">    private handleNoteTitleChange = (event: any) =&gt; {</span></div></div><div class=""><div><span class="enlighter-e2">        this.setState({ noteTitle: event.target.value });</span></div></div><div class=""><div><span class="enlighter-e2">    };</span></div></div><div class=""><div><span class="enlighter-e2"></span></div></div><div class=""><div><span class="enlighter-e2">    private handleNoteBodyChange = (event: any) =&gt; {</span></div></div><div class=""><div><span class="enlighter-e2">        this.setState({ noteBody: event.target.value });</span></div></div><div class=""><div><span class="enlighter-e2">    };</span></div></div><div class=""><div><span class="enlighter-e2"></span></div></div><div class=""><div><span class="enlighter-e2">    private handleSubmit = (event: any) =&gt; {</span></div></div><div class=""><div><span class="enlighter-e2">        event.preventDefault();</span></div></div><div class=""><div><span class="enlighter-e2">        const { noteBody, noteTitle } = this.state;</span></div></div><div class=""><div><span class="enlighter-e2">        const { createNote, onSuccess } = this.props;</span></div></div><div class=""><div><span class="enlighter-e2"></span></div></div><div class=""><div><span class="enlighter-e2">        return createNote({ variables: { input: { title: noteTitle, body: noteBody } } })</span></div></div><div class=""><div><span class="enlighter-e2">            .then(() =&gt; {</span></div></div><div class=""><div><span class="enlighter-e2">                this.setState({ noteBody: '', noteTitle: '' });</span></div></div><div class=""><div><span class="enlighter-e2">                return onSuccess();</span></div></div><div class=""><div><span class="enlighter-e2">            });</span></div></div><div class=""><div><span class="enlighter-e2">    }</span></div></div><div class=""><div><span class="enlighter-e2">}</span></div></div><div class=""><div><span class="enlighter-e2"></span></div></div><div class=""><div><span class="enlighter-e2">export default compose(</span></div></div><div class=""><div><span class="enlighter-e2">    withApollo,</span></div></div><div class=""><div><span class="enlighter-e2">    NoteCreateMutation.HOC({</span></div></div><div class=""><div><span class="enlighter-e2">        props: ({ mutate }) =&gt; ({</span></div></div><div class=""><div><span class="enlighter-e2">            /</span><span class="enlighter-text">/ renaming mutation from </span><span class="enlighter-s2">`mutate`</span><span class="enlighter-text"> to </span><span class="enlighter-s2">`createNote`</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">           </span><span class="enlighter-c0"> // (more readable)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">           </span><span class="enlighter-c0"> // and passing it to props</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            createNote: mutate</span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-g1">)</span><span class="enlighter-text">,</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">)</span><span class="enlighter-g1">(</span><span class="enlighter-text">CreateNoteForm</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div></div><div class="enlighter-raw">// front/src/views/Notes/CreteNoteForm.tsx

import { Button, Form, Input } from 'antd';
import * as React from 'react';
import { compose, withApollo } from 'react-apollo';
import { NoteCreateMutation } from '../../generatedModels';

interface ICreateNoteFormState {
    noteBody: string;
    noteTitle: string;
}

interface ICreateNoteFormProps {
    createNote: NoteCreateMutation.MutationFn;
    onSuccess: () =&gt; any;
}

class CreateNoteForm extends React.Component&lt;ICreateNoteFormProps, ICreateNoteFormState&gt; {
    public state: ICreateNoteFormState = {
        noteBody: '',
        noteTitle: '',
    }

    public render() {
        const { noteBody, noteTitle } = this.state;

        return (
            &lt;Form onSubmit={this.handleSubmit}&gt;
                &lt;Form.Item&gt;
                    &lt;Input
                        placeholder="Title"
                        value={noteTitle}
                        onChange={this.handleNoteTitleChange}
                    /&gt;
                &lt;/Form.Item&gt;
                &lt;Form.Item&gt;
                    &lt;Input.TextArea
                        placeholder="Body"
                        value={noteBody}
                        onChange={this.handleNoteBodyChange}
                    /&gt;
                &lt;/Form.Item&gt;
                &lt;Form.Item&gt;
                    &lt;Button type="primary" htmlType="submit"&gt;Create&lt;/Button&gt;
                &lt;/Form.Item&gt;
            &lt;/Form&gt;
        );
    }

    private handleNoteTitleChange = (event: any) =&gt; {
        this.setState({ noteTitle: event.target.value });
    };

    private handleNoteBodyChange = (event: any) =&gt; {
        this.setState({ noteBody: event.target.value });
    };

    private handleSubmit = (event: any) =&gt; {
        event.preventDefault();
        const { noteBody, noteTitle } = this.state;
        const { createNote, onSuccess } = this.props;

        return createNote({ variables: { input: { title: noteTitle, body: noteBody } } })
            .then(() =&gt; {
                this.setState({ noteBody: '', noteTitle: '' });
                return onSuccess();
            });
    }
}

export default compose(
    withApollo,
    NoteCreateMutation.HOC({
        props: ({ mutate }) =&gt; ({
            // renaming mutation from `mutate` to `createNote`
            // (more readable)
            // and passing it to props
            createNote: mutate
        })
    }),
)(CreateNoteForm);</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="js" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// front/src/views/Notes/CreteNoteForm.tsx

import { Button, Form, Input } from 'antd';
import * as React from 'react';
import { compose, withApollo } from 'react-apollo';
import { NoteCreateMutation } from '../../generatedModels';

interface ICreateNoteFormState {
    noteBody: string;
    noteTitle: string;
}

interface ICreateNoteFormProps {
    createNote: NoteCreateMutation.MutationFn;
    onSuccess: () =&gt; any;
}

class CreateNoteForm extends React.Component&lt;ICreateNoteFormProps, ICreateNoteFormState&gt; {
    public state: ICreateNoteFormState = {
        noteBody: '',
        noteTitle: '',
    }

    public render() {
        const { noteBody, noteTitle } = this.state;

        return (
            &lt;Form onSubmit={this.handleSubmit}&gt;
                &lt;Form.Item&gt;
                    &lt;Input
                        placeholder="Title"
                        value={noteTitle}
                        onChange={this.handleNoteTitleChange}
                    /&gt;
                &lt;/Form.Item&gt;
                &lt;Form.Item&gt;
                    &lt;Input.TextArea
                        placeholder="Body"
                        value={noteBody}
                        onChange={this.handleNoteBodyChange}
                    /&gt;
                &lt;/Form.Item&gt;
                &lt;Form.Item&gt;
                    &lt;Button type="primary" htmlType="submit"&gt;Create&lt;/Button&gt;
                &lt;/Form.Item&gt;
            &lt;/Form&gt;
        );
    }

    private handleNoteTitleChange = (event: any) =&gt; {
        this.setState({ noteTitle: event.target.value });
    };

    private handleNoteBodyChange = (event: any) =&gt; {
        this.setState({ noteBody: event.target.value });
    };

    private handleSubmit = (event: any) =&gt; {
        event.preventDefault();
        const { noteBody, noteTitle } = this.state;
        const { createNote, onSuccess } = this.props;

        return createNote({ variables: { input: { title: noteTitle, body: noteBody } } })
            .then(() =&gt; {
                this.setState({ noteBody: '', noteTitle: '' });
                return onSuccess();
            });
    }
}

export default compose(
    withApollo,
    NoteCreateMutation.HOC({
        props: ({ mutate }) =&gt; ({
            // renaming mutation from `mutate` to `createNote`
            // (more readable)
            // and passing it to props
            createNote: mutate
        })
    }),
)(CreateNoteForm);</pre>



<p class="selectionShareable">The last thing that we should do is to update the main component:</p>



<div class="enlighter-default enlighter-v-standard enlighter-t-bootstrap4 enlighter-hover enlighter-linenumbers "><div class="enlighter-toolbar-top enlighter-toolbar"><div class="enlighter-btn enlighter-btn-raw" title="Plain text"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter"></div></div><div class="enlighter" style=""><div class=""><div><span class="enlighter-c0">// front/src/App.tsx</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> * </span><span class="enlighter-k0">as</span><span class="enlighter-text"> React from </span><span class="enlighter-s0">'react'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> BrowserRouter </span><span class="enlighter-k0">as</span><span class="enlighter-text"> Router, Route </span><span class="enlighter-g1">}</span><span class="enlighter-text"> from </span><span class="enlighter-s0">'react-router-dom'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">import</span><span class="enlighter-text"> Notes from </span><span class="enlighter-s0">'./views/Notes'</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">class</span><span class="enlighter-text"> App </span><span class="enlighter-k0">extends</span><span class="enlighter-text"> React.</span><span class="enlighter-m3">Component</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-m0">render</span><span class="enlighter-g1">(</span><span class="enlighter-g1">)</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">            </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Router</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">                </span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Route exact=</span><span class="enlighter-g1">{</span><span class="enlighter-e0">true</span><span class="enlighter-g1">}</span><span class="enlighter-text"> path=</span><span class="enlighter-s0">"/"</span><span class="enlighter-text"> component=</span><span class="enlighter-g1">{</span><span class="enlighter-text">Notes</span><span class="enlighter-g1">}</span><span class="enlighter-text"> </span><span class="enlighter-e2">/&gt;</span></div></div><div class=""><div><span class="enlighter-e2">            &lt;/Router</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text">        </span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class=""><div><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span></div></div><div class=""><div><span class="enlighter-text"></span><span class="enlighter-k0">export</span><span class="enlighter-text"> </span><span class="enlighter-k0">default</span><span class="enlighter-text"> App;</span></div></div></div><div class="enlighter-raw">// front/src/App.tsx

import * as React from 'react';
import { BrowserRouter as Router, Route } from 'react-router-dom';
import Notes from './views/Notes';

class App extends React.Component {
    public render() {
        return (
            &lt;Router&gt;
                &lt;Route exact={true} path="/" component={Notes} /&gt;
            &lt;/Router&gt;
        );
    }
}

export default App;</div><div class="enlighter-toolbar-bottom enlighter-toolbar"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="js" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// front/src/App.tsx

import * as React from 'react';
import { BrowserRouter as Router, Route } from 'react-router-dom';
import Notes from './views/Notes';

class App extends React.Component {
    public render() {
        return (
            &lt;Router&gt;
                &lt;Route exact={true} path="/" component={Notes} /&gt;
            &lt;/Router&gt;
        );
    }
}

export default App;</pre>



<p class="selectionShareable">Everything should work now.</p>
						</div> <!-- .entry-content -->
					</div> <!-- .hentry-wrap -->
										<div class="post-tags tagcloud">
						<a href="https://apirobot.me/posts/tag/django" rel="tag">django</a> <a href="https://apirobot.me/posts/tag/graphql" rel="tag">graphql</a> <a href="https://apirobot.me/posts/tag/python" rel="tag">python</a> <a href="https://apirobot.me/posts/tag/react" rel="tag">react</a> <a href="https://apirobot.me/posts/tag/typescript" rel="tag">typescript</a>					</div>
																		<div class="share-links">
					<h3>
						Share This					</h3>
					
					<a class="share-facebook" rel="nofollow" target="_blank" href="http://www.facebook.com/sharer.php?u=https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api&amp;t=Django+%2B+React+%2B+TS.+How+to+create+and+consume+GraphQL+API" title="Share this post on Facebook">
						<i class="pw-icon-facebook"></i>
					</a>
					
					<a class="share-twitter" rel="nofollow" target="_blank" href="https://twitter.com/intent/tweet?text=Django%20+%20React%20+%20TS.%20How%20to%20create%20and%20consume%20GraphQL%20API&amp;url=https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" title="Share this post with your followers">
						<i class="pw-icon-twitter"></i>
					</a>
					
					<a class="share-pinterest" rel="nofollow" target="_blank" href="https://pinterest.com/pin/create/button/?url=https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api&amp;media=https://apirobot.me/wp-content/uploads/2019/01/cover-django-react-ts-how-to-create-and-consume-graphql-api-1060x596.png&amp;description=Django+%2B+React+%2B+TS.+How+to+create+and+consume+GraphQL+API" title="Pin It">
						<i class="pw-icon-pinterest-circled"></i>
					</a>
					
					<a class="share-mail" rel="nofollow" target="_blank" href="mailto:?subject=I%20wanted%20you%20to%20see%20this%20post&amp;body=Check%20out%20this%20post:%20Django%20+%20React%20+%20TS.%20How%20to%20create%20and%20consume%20GraphQL%20API%20https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" title="Email this post to a friend">
						<i class="pw-icon-mail"></i>
					</a>
				</div> <!-- .share-links -->
														<nav class="nav-single">
							<div class="nav-previous">
																			<a class="nav-image-link" href="https://apirobot.me/posts/how-to-start-django-project-that-scales">
												<img alt="" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/cover-1-300x300.png">
											</a>
																		
								<div class="nav-desc"><h4>Previous Post</h4><a href="https://apirobot.me/posts/how-to-start-django-project-that-scales" rel="prev"><span class="meta-nav">←</span> Как начать Django проект, который можно масштабировать</a></div>								
																			<a class="nav-overlay-link" href="https://apirobot.me/posts/how-to-start-django-project-that-scales" rel="prev">
												Как начать Django проект, который можно масштабировать											</a>
																	</div>
							
							<div class="nav-next">
																			<a class="nav-image-link" href="https://apirobot.me/posts/lets-talk-about-data-structures-in-python">
												<img alt="" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/lets-talk-about-data-structures-in-python-300x300.png">
											</a>
																		
								<div class="nav-desc"><h4>Next Post</h4><a href="https://apirobot.me/posts/lets-talk-about-data-structures-in-python" rel="next">Let’s talk about data structures in Python <span class="meta-nav">→</span></a></div>								
																			<a class="nav-overlay-link" href="https://apirobot.me/posts/lets-talk-about-data-structures-in-python" rel="next">
												Let's talk about data structures in Python											</a>
																	</div>
						</nav>
														<aside class="about-author">
					<h3 class="widget-title">
						<span>
							Written By						</span>
					</h3>
					
					<div class="author-bio">
						<div class="author-img">
							<a href="https://apirobot.me/posts/author/apirobot">
								<img alt="apirobot" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/1aa5129e871692c4aa922d113e266fcc.png" srcset="https://secure.gravatar.com/avatar/1aa5129e871692c4aa922d113e266fcc?s=600&amp;d=mm&amp;r=g 2x" class="avatar avatar-300 photo grav-hashed" height="300" width="300" loading="lazy" id="grav-1aa5129e871692c4aa922d113e266fcc-0">							</a>
						</div>
						<div class="author-info">
							<h4 class="author-name">
								apirobot							</h4>
							<p class="selectionShareable">
															</p>
													</div>
					</div>
				</aside>
													<div class="related-posts">
						<h3 class="widget-title">
							<span>
								You May Also Like							</span>
						</h3>
						<div class="blocks">
																	<div class="block">
											<div class="post-thumbnail" style="background-image: url(https://apirobot.me/wp-content/uploads/2020/03/introduction-to-sqlalchemy-550x550.png);">
												<div class="post-wrap">
													<header class="entry-header ready">
														<div class="entry-meta">
															<span class="cat-links">
																<a href="https://apirobot.me/posts/category/programming" rel="category tag">Programming</a>															</span>
														</div>
														<h2 class="entry-title">
															<a href="https://apirobot.me/posts/introduction-to-sqlalchemy-orm-for-django-developers">
																Introduction to SQLAlchemy ORM for Django Developers															</a>
														</h2>
														<a class="more-link" href="https://apirobot.me/posts/introduction-to-sqlalchemy-orm-for-django-developers">
															View Post														</a>
													</header>
												<a class="more-link outside" href="https://apirobot.me/posts/introduction-to-sqlalchemy-orm-for-django-developers">
															View Post														</a></div>
											</div>
										</div>
																			<div class="block">
											<div class="post-thumbnail" style="background-image: url();">
												<div class="post-wrap">
													<header class="entry-header ready">
														<div class="entry-meta">
															<span class="cat-links">
																<a href="https://apirobot.me/posts/category/programming" rel="category tag">Programming</a>															</span>
														</div>
														<h2 class="entry-title">
															<a href="https://apirobot.me/posts/django-elm-auth-with-jwt">
																Django + Elm. Аутентификация через JSON Web Token															</a>
														</h2>
														<a class="more-link" href="https://apirobot.me/posts/django-elm-auth-with-jwt">
															View Post														</a>
													</header>
												<a class="more-link outside" href="https://apirobot.me/posts/django-elm-auth-with-jwt">
															View Post														</a></div>
											</div>
										</div>
																			<div class="block">
											<div class="post-thumbnail" style="background-image: url(https://apirobot.me/wp-content/uploads/2019/03/django-graphql-solving-n-1-problem-using-dataloaders-550x550.png);">
												<div class="post-wrap">
													<header class="entry-header ready">
														<div class="entry-meta">
															<span class="cat-links">
																<a href="https://apirobot.me/posts/category/programming" rel="category tag">Programming</a>															</span>
														</div>
														<h2 class="entry-title">
															<a href="https://apirobot.me/posts/django-graphql-solving-n-1-problem-using-dataloaders">
																Django + GraphQL. Solving N+1 Problem using DataLoaders															</a>
														</h2>
														<a class="more-link" href="https://apirobot.me/posts/django-graphql-solving-n-1-problem-using-dataloaders">
															View Post														</a>
													</header>
												<a class="more-link outside" href="https://apirobot.me/posts/django-graphql-solving-n-1-problem-using-dataloaders">
															View Post														</a></div>
											</div>
										</div>
															</div>
					</div>
								</article> <!-- .post -->
				
			<div id="comments" class="comments-area">
											<h3 class="widget-title">
								<span>
									9 Comments 								</span>
							</h3>
							
							<ol class="commentlist">
													<li id="li-comment-11" class="comment even thread-even depth-1">
						<article id="comment-11" class="comment">
							<header class="comment-meta comment-author vcard">
								<img alt="" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/188c1420bc236bdb74242e6e49884745.png" srcset="https://secure.gravatar.com/avatar/188c1420bc236bdb74242e6e49884745?s=300&amp;d=mm&amp;r=g 2x" class="avatar avatar-150 photo grav-hashed grav-hijack" height="150" width="150" loading="lazy" id="grav-188c1420bc236bdb74242e6e49884745-0">								<cite class="fn">
									<a href="https://forwhiskeylovers.com/users/petciel" rel="external nofollow ugc" class="url">Chae Mijangos</a>								</cite>
								<span class="comment-date">
									February 13, 2019									at									7:08 pm																	</span>
							</header>
							
							<section class="comment-content comment">
																<p class="selectionShareable">Pretty! This was an extremely wonderful post. Many thanks for supplying this info.</p>
							</section>
							
							<div class="reply">
								<a rel="nofollow" class="comment-reply-link" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api?replytocom=11#respond" data-commentid="11" data-postid="177" data-belowelement="comment-11" data-respondelement="respond" data-replyto="Reply to Chae Mijangos" aria-label="Reply to Chae Mijangos">Reply</a> <span>↓</span>							</div>
						</article>
				<ol class="children">
					<li id="li-comment-17" class="comment byuser comment-author-apirobot bypostauthor odd alt depth-2">
						<article id="comment-17" class="comment">
							<header class="comment-meta comment-author vcard">
								<img alt="" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/1aa5129e871692c4aa922d113e266fcc(1).png" srcset="https://secure.gravatar.com/avatar/1aa5129e871692c4aa922d113e266fcc?s=300&amp;d=mm&amp;r=g 2x" class="avatar avatar-150 photo grav-hashed grav-hijack" height="150" width="150" loading="lazy" id="grav-1aa5129e871692c4aa922d113e266fcc-1">								<cite class="fn">
									<a href="https://apirobot.me/" rel="external nofollow ugc" class="url">apirobot</a>								</cite>
								<span class="comment-date">
									February 19, 2019									at									6:36 am																	</span>
							</header>
							
							<section class="comment-content comment">
																<p class="selectionShareable">Thanks for reading 🙂</p>
							</section>
							
							<div class="reply">
								<a rel="nofollow" class="comment-reply-link" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api?replytocom=17#respond" data-commentid="17" data-postid="177" data-belowelement="comment-17" data-respondelement="respond" data-replyto="Reply to apirobot" aria-label="Reply to apirobot">Reply</a> <span>↓</span>							</div>
						</article>
				</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
					<li id="li-comment-1406" class="comment even thread-odd thread-alt depth-1">
						<article id="comment-1406" class="comment">
							<header class="comment-meta comment-author vcard">
								<img alt="" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/83950cdf80b588d0ac900d29a4db9a5f.jpeg" srcset="https://secure.gravatar.com/avatar/83950cdf80b588d0ac900d29a4db9a5f?s=300&amp;d=mm&amp;r=g 2x" class="avatar avatar-150 photo grav-hashed grav-hijack" height="150" width="150" loading="lazy" id="grav-83950cdf80b588d0ac900d29a4db9a5f-0">								<cite class="fn">
									David								</cite>
								<span class="comment-date">
									February 9, 2020									at									3:39 pm																	</span>
							</header>
							
							<section class="comment-content comment">
																<p class="selectionShareable">Hi Denis,</p>
<p class="selectionShareable">Great tutorial! but I have run into some trouble with the gql-gen, the code it generated have a handful of errors. I did pull your repo and you have no errors.<br>
Some of the things like QueryProps, MutationsProps, and MutationFn all become error unlike yours, you have any idea? thanks!</p>
							</section>
							
							<div class="reply">
								<a rel="nofollow" class="comment-reply-link" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api?replytocom=1406#respond" data-commentid="1406" data-postid="177" data-belowelement="comment-1406" data-respondelement="respond" data-replyto="Reply to David" aria-label="Reply to David">Reply</a> <span>↓</span>							</div>
						</article>
				<ol class="children">
					<li id="li-comment-1414" class="comment byuser comment-author-apirobot bypostauthor odd alt depth-2">
						<article id="comment-1414" class="comment">
							<header class="comment-meta comment-author vcard">
								<img alt="" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/1aa5129e871692c4aa922d113e266fcc(1).png" srcset="https://secure.gravatar.com/avatar/1aa5129e871692c4aa922d113e266fcc?s=300&amp;d=mm&amp;r=g 2x" class="avatar avatar-150 photo grav-hashed grav-hijack" height="150" width="150" loading="lazy" id="grav-1aa5129e871692c4aa922d113e266fcc-2">								<cite class="fn">
									<a href="https://apirobot.me/" rel="external nofollow ugc" class="url">apirobot</a>								</cite>
								<span class="comment-date">
									February 10, 2020									at									4:05 am																	</span>
							</header>
							
							<section class="comment-content comment">
																<p class="selectionShareable">Hi. I haven’t used graphql for a while but what kind of error does it show?</p>
							</section>
							
							<div class="reply">
								<a rel="nofollow" class="comment-reply-link" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api?replytocom=1414#respond" data-commentid="1414" data-postid="177" data-belowelement="comment-1414" data-respondelement="respond" data-replyto="Reply to apirobot" aria-label="Reply to apirobot">Reply</a> <span>↓</span>							</div>
						</article>
				<ol class="children">
					<li id="li-comment-1415" class="comment byuser comment-author-apirobot bypostauthor even depth-3">
						<article id="comment-1415" class="comment">
							<header class="comment-meta comment-author vcard">
								<img alt="" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/1aa5129e871692c4aa922d113e266fcc(1).png" srcset="https://secure.gravatar.com/avatar/1aa5129e871692c4aa922d113e266fcc?s=300&amp;d=mm&amp;r=g 2x" class="avatar avatar-150 photo grav-hashed grav-hijack" height="150" width="150" loading="lazy" id="grav-1aa5129e871692c4aa922d113e266fcc-3">								<cite class="fn">
									<a href="https://apirobot.me/" rel="external nofollow ugc" class="url">apirobot</a>								</cite>
								<span class="comment-date">
									February 10, 2020									at									4:06 am																	</span>
							</header>
							
							<section class="comment-content comment">
																<p class="selectionShareable">Do you have the same tsconfig file? <a href="https://github.com/apirobot/django-react-graphql-simplenote/blob/master/front/tsconfig.json" rel="nofollow ugc">https://github.com/apirobot/django-react-graphql-simplenote/blob/master/front/tsconfig.json</a></p>
							</section>
							
							<div class="reply">
								<a rel="nofollow" class="comment-reply-link" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api?replytocom=1415#respond" data-commentid="1415" data-postid="177" data-belowelement="comment-1415" data-respondelement="respond" data-replyto="Reply to apirobot" aria-label="Reply to apirobot">Reply</a> <span>↓</span>							</div>
						</article>
				<ol class="children">
					<li id="li-comment-1419" class="comment odd alt depth-4">
						<article id="comment-1419" class="comment">
							<header class="comment-meta comment-author vcard">
								<img alt="" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/83950cdf80b588d0ac900d29a4db9a5f.jpeg" srcset="https://secure.gravatar.com/avatar/83950cdf80b588d0ac900d29a4db9a5f?s=300&amp;d=mm&amp;r=g 2x" class="avatar avatar-150 photo grav-hashed grav-hijack" height="150" width="150" loading="lazy" id="grav-83950cdf80b588d0ac900d29a4db9a5f-1">								<cite class="fn">
									davdi								</cite>
								<span class="comment-date">
									February 10, 2020									at									7:01 am																	</span>
							</header>
							
							<section class="comment-content comment">
																<p class="selectionShareable">QueryProps, MutationsProps, and MutationFn are not in the react-apollo lib</p>
<p class="selectionShareable">I have copied and pasted the tsconfig.json but no luck</p>
							</section>
							
							<div class="reply">
								<a rel="nofollow" class="comment-reply-link" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api?replytocom=1419#respond" data-commentid="1419" data-postid="177" data-belowelement="comment-1419" data-respondelement="respond" data-replyto="Reply to davdi" aria-label="Reply to davdi">Reply</a> <span>↓</span>							</div>
						</article>
				</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
					<li id="li-comment-1458" class="comment even thread-even depth-1">
						<article id="comment-1458" class="comment">
							<header class="comment-meta comment-author vcard">
								<img alt="" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/c0caa3dbb9df4d5d65091e1212252c7a.png" srcset="https://secure.gravatar.com/avatar/c0caa3dbb9df4d5d65091e1212252c7a?s=300&amp;d=mm&amp;r=g 2x" class="avatar avatar-150 photo grav-hashed grav-hijack" height="150" width="150" loading="lazy" id="grav-c0caa3dbb9df4d5d65091e1212252c7a-0">								<cite class="fn">
									Rafael Romario								</cite>
								<span class="comment-date">
									February 14, 2020									at									9:12 pm																	</span>
							</header>
							
							<section class="comment-content comment">
																<p class="selectionShareable">thank you.. !!! good tutotial.</p>
							</section>
							
							<div class="reply">
								<a rel="nofollow" class="comment-reply-link" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api?replytocom=1458#respond" data-commentid="1458" data-postid="177" data-belowelement="comment-1458" data-respondelement="respond" data-replyto="Reply to Rafael Romario" aria-label="Reply to Rafael Romario">Reply</a> <span>↓</span>							</div>
						</article>
				</li><!-- #comment-## -->
					<li id="li-comment-1733" class="comment odd alt thread-odd thread-alt depth-1">
						<article id="comment-1733" class="comment">
							<header class="comment-meta comment-author vcard">
								<img alt="" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/5fbc6c5eb4902fddf8f975ed6c0912d2.png" srcset="https://secure.gravatar.com/avatar/5fbc6c5eb4902fddf8f975ed6c0912d2?s=300&amp;d=mm&amp;r=g 2x" class="avatar avatar-150 photo grav-hashed grav-hijack" height="150" width="150" loading="lazy" id="grav-5fbc6c5eb4902fddf8f975ed6c0912d2-0">								<cite class="fn">
									Mikhail								</cite>
								<span class="comment-date">
									April 19, 2020									at									5:32 pm																	</span>
							</header>
							
							<section class="comment-content comment">
																<p class="selectionShareable">Great tutorial, thank you!</p>
<p class="selectionShareable">I’m stuck at this stage though:</p>
<p class="selectionShareable">yarn gql-gen –config codegen.yml</p>
<p class="selectionShareable">Error message:</p>
<p class="selectionShareable">Error: Must provide Source. Received: undefined.</p>
							</section>
							
							<div class="reply">
								<a rel="nofollow" class="comment-reply-link" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api?replytocom=1733#respond" data-commentid="1733" data-postid="177" data-belowelement="comment-1733" data-respondelement="respond" data-replyto="Reply to Mikhail" aria-label="Reply to Mikhail">Reply</a> <span>↓</span>							</div>
						</article>
				<ol class="children">
					<li id="li-comment-2516" class="comment even depth-2">
						<article id="comment-2516" class="comment">
							<header class="comment-meta comment-author vcard">
								<img alt="" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/8739d95efc2219d445810da2679d5114.png" srcset="https://secure.gravatar.com/avatar/8739d95efc2219d445810da2679d5114?s=300&amp;d=mm&amp;r=g 2x" class="avatar avatar-150 photo grav-hashed grav-hijack" height="150" width="150" loading="lazy" id="grav-8739d95efc2219d445810da2679d5114-0">								<cite class="fn">
									Mikah								</cite>
								<span class="comment-date">
									September 21, 2020									at									4:52 pm																	</span>
							</header>
							
							<section class="comment-content comment">
																<p class="selectionShareable">I ran into the same problem because my filters.py file wasn’t being imported/used by my schema.py file. Once I had “Search” as a valid variable it worked</p>
							</section>
							
							<div class="reply">
								<a rel="nofollow" class="comment-reply-link" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api?replytocom=2516#respond" data-commentid="2516" data-postid="177" data-belowelement="comment-2516" data-respondelement="respond" data-replyto="Reply to Mikah" aria-label="Reply to Mikah">Reply</a> <span>↓</span>							</div>
						</article>
				</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
							</ol>
							
											
					<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave A Comment <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://apirobot.me/wp-comments-post.php" method="post" id="commentform" class="comment-form validate-form" novalidate="novalidate"><p class="comment-notes selectionShareable"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required" aria-required="true">*</span></p><p class="comment-form-comment selectionShareable"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required" aria-required="true"></textarea></p><p class="comment-form-author selectionShareable"><label for="author">Name <span class="required" aria-required="true">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required="required" class="input-text" aria-required="true"></p>
<p class="comment-form-email selectionShareable"><label for="email">Email <span class="required" aria-required="true">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" required="required" class="input-text email" aria-required="true"></p>
<p class="comment-form-url selectionShareable"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" class="input-text"></p>
<p class="comment-subscription-form selectionShareable"><input type="checkbox" name="subscribe_comments" id="subscribe_comments" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;"> <label class="subscribe-label" id="subscribe-label" for="subscribe_comments">Notify me of follow-up comments by email.</label></p><p class="comment-subscription-form selectionShareable"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;"> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog">Notify me of new posts by email.</label></p><p class="form-submit selectionShareable"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="177" id="comment_post_ID" class="input-text">
<input type="hidden" name="comment_parent" id="comment_parent" value="0" class="input-text">
</p><p style="display: none;" class="selectionShareable"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="d72e3519bb" class="input-text"></p><!-- Anti-spam plugin wordpress.org/plugins/anti-spam/ --><div class="wantispam-required-fields wantispam-form-processed"><input type="hidden" name="wantispam_t" class="wantispam-control wantispam-control-t input-text" value="1669108534"><div class="wantispam-group wantispam-group-q" style="clear: both; display: none;">
					<label>Current ye@r <span class="required" aria-required="true">*</span></label>
					<input type="hidden" name="wantispam_a" class="wantispam-control wantispam-control-a input-text" value="2022">
					<input type="text" name="wantispam_q" class="wantispam-control wantispam-control-q input-text" value="7.2.9" autocomplete="off">
				  </div>
<div class="wantispam-group wantispam-group-e" style="display: none;">
					<label>Leave this field empty</label>
					<input type="text" name="wantispam_e_email_url_website" class="wantispam-control wantispam-control-e input-text" value="" autocomplete="off">
				  </div>
<input type="hidden" name="wantispam_d" class="wantispam-control wantispam-control-d input-text" value="2022"></div><!--\End Anti-spam plugin --><p style="display: none !important;" class="selectionShareable"><label>Δ<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js" name="ak_js" value="1669108536490" class="input-text"><script>document.getElementById( "ak_js" ).setAttribute( "value", ( new Date() ).getTime() );</script></p></form>	</div><!-- #respond -->
				</div>
					</div> <!-- #content .site-content -->
		</div> <!-- #primary .content-area -->

			</div> <!-- layout -->
</div> <!-- #main .site-main -->

        <footer id="colophon" class="site-footer" role="contentinfo">
									<div class="footer-subscribe">
							<div class="layout-medium">
								<h3>Stay Updated</h3><script>(function() {
	window.mc4wp = window.mc4wp || {
		listeners: [],
		forms: {
			on: function(evt, cb) {
				window.mc4wp.listeners.push(
					{
						event   : evt,
						callback: cb
					}
				);
			}
		}
	}
})();
</script><!-- Mailchimp for WordPress v4.8.6 - https://wordpress.org/plugins/mailchimp-for-wp/ --><form id="mc4wp-form-1" class="mc4wp-form mc4wp-form-173 validate-form" method="post" data-id="173" data-name="Stay Updated" novalidate="novalidate"><div class="mc4wp-form-fields"><p class="selectionShareable">
	<label>I won’t send you spam. Unsubscribe at any time. </label>
	<input type="email" name="EMAIL" placeholder="Your email address" required="" class="input-text" aria-required="true">
</p>

<p class="selectionShareable">
	<input type="submit" value="Sign up">
</p></div><label style="display: none !important;">Leave this field empty if you're human: <input type="text" name="_mc4wp_honeypot" value="" tabindex="-1" autocomplete="off" class="input-text"></label><input type="hidden" name="_mc4wp_timestamp" value="1669108534" class="input-text"><input type="hidden" name="_mc4wp_form_id" value="173" class="input-text"><input type="hidden" name="_mc4wp_form_element_id" value="mc4wp-form-1" class="input-text"><div class="mc4wp-response"></div></form><!-- / Mailchimp for WordPress Plugin -->							</div>
						</div>
								
						
						
					</footer>
	</div>
    
	<script>jQuery(document).ready(function ($) { $('p').selectionSharer();});</script><script>(function() {function maybePrefixUrlField() {
	if (this.value.trim() !== '' && this.value.indexOf('http') !== 0) {
		this.value = "http://" + this.value;
	}
}

var urlFields = document.querySelectorAll('.mc4wp-form input[type="url"]');
if (urlFields) {
	for (var j=0; j < urlFields.length; j++) {
		urlFields[j].addEventListener('blur', maybePrefixUrlField);
	}
}
})();</script>	<div style="display:none">
	<div class="grofile-hash-map-1aa5129e871692c4aa922d113e266fcc">
	</div>
	<div class="grofile-hash-map-694b499dcdc97fac23e12ad99fffca32">
	</div>
	<div class="grofile-hash-map-1aa5129e871692c4aa922d113e266fcc">
	</div>
	<div class="grofile-hash-map-83950cdf80b588d0ac900d29a4db9a5f">
	</div>
	<div class="grofile-hash-map-c0caa3dbb9df4d5d65091e1212252c7a">
	</div>
	<div class="grofile-hash-map-5fbc6c5eb4902fddf8f975ed6c0912d2">
	</div>
	<div class="grofile-hash-map-8739d95efc2219d445810da2679d5114">
	</div>
	</div>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/anti-spam.js" id="anti-spam-script-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/wp-polyfill.min.js" id="wp-polyfill-js"></script>
<script type="text/javascript" id="wp-polyfill-js-after">
( 'fetch' in window ) || document.write( '<script src="https://apirobot.me/wp-includes/js/dist/vendor/wp-polyfill-fetch.min.js?ver=3.0.0"></scr' + 'ipt>' );( document.contains ) || document.write( '<script src="https://apirobot.me/wp-includes/js/dist/vendor/wp-polyfill-node-contains.min.js?ver=3.42.0"></scr' + 'ipt>' );( window.DOMRect ) || document.write( '<script src="https://apirobot.me/wp-includes/js/dist/vendor/wp-polyfill-dom-rect.min.js?ver=3.42.0"></scr' + 'ipt>' );( window.URL && window.URL.prototype && window.URLSearchParams ) || document.write( '<script src="https://apirobot.me/wp-includes/js/dist/vendor/wp-polyfill-url.min.js?ver=3.6.4"></scr' + 'ipt>' );( window.FormData && window.FormData.prototype.keys ) || document.write( '<script src="https://apirobot.me/wp-includes/js/dist/vendor/wp-polyfill-formdata.min.js?ver=3.0.12"></scr' + 'ipt>' );( Element.prototype.matches && Element.prototype.closest ) || document.write( '<script src="https://apirobot.me/wp-includes/js/dist/vendor/wp-polyfill-element-closest.min.js?ver=2.0.2"></scr' + 'ipt>' );( 'objectFit' in document.documentElement.style ) || document.write( '<script src="https://apirobot.me/wp-includes/js/dist/vendor/wp-polyfill-object-fit.min.js?ver=2.3.4"></scr' + 'ipt>' );
</script>
<script type="text/javascript" id="contact-form-7-js-extra">
/* <![CDATA[ */
var wpcf7 = {"api":{"root":"https:\/\/apirobot.me\/wp-json\/","namespace":"contact-form-7\/v1"}};
/* ]]> */
</script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/index.js" id="contact-form-7-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/gprofiles.js" id="grofiles-cards-js"></script>
<script type="text/javascript" id="wpgroho-js-extra">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/wpgroho.js" id="wpgroho-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/comment-reply.min.js" id="comment-reply-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jquery.fitvids.js" id="fitvids-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jarallax.min.js" id="jarallax-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jarallax-video.min.js" id="jarallax-video-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jquery.fluidbox.min.js" id="fluidbox-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jquery.validate.js" id="validate-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/isotope.pkgd.min.js" id="isotope-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jquery.magnific-popup.min.js" id="magnific-popup-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/owl.carousel.min.js" id="owl-carousel-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/imagesloaded.min.js" id="imagesloaded-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jquery.collagePlus.min.js" id="collagePlus-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jquery.fittext.js" id="fittext-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/resize-sensor.js" id="resize-sensor-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jquery.sticky-sidebar.min.js" id="sticky-sidebar-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/main.js" id="theblogger-main-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/jquery.validate.min.js" id="jqueryvalidation-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/shortcodes.js" id="theblogger-shortcodes-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/enlighterjs.min.js" id="enlighterjs-js"></script>
<script type="text/javascript" id="enlighterjs-js-after">
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":4,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":false,"textOverflow":"break","linenumbers":true,"theme":"bootstrap4","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/wp-embed.min.js" id="wp-embed-js"></script>
<script type="text/javascript" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/selection-sharer.js" id="selection-sharer-js-js"></script>
<script type="text/javascript" defer="" src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/forms.js" id="mc4wp-forms-api-js"></script>
<script src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/e-202247.js" defer=""></script>
<script>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:10.4',blog:'159444859',post:'177',tz:'0',srv:'apirobot.me'} ]);
	_stq.push([ 'clickTrackerInit', '159444859', '177' ]);
</script>
	
	<script>
		(function($) { "use strict"; 
			$.extend($.validator.messages, {
				required: "This field is required.",
				remote: "Please fix this field.",
				email: "Please enter a valid email address.",
				url: "Please enter a valid URL.",
				date: "Please enter a valid date.",
				dateISO: "Please enter a valid date ( ISO ).",
				number: "Please enter a valid number.",
				digits: "Please enter only digits.",
				equalTo: "Please enter the same value again.",
				maxlength: $.validator.format("Please enter no more than {0} characters."),
				minlength: $.validator.format("Please enter at least {0} characters."),
				rangelength: $.validator.format("Please enter a value between {0} and {1} characters long."),
				range: $.validator.format("Please enter a value between {0} and {1}."),
				max: $.validator.format("Please enter a value less than or equal to {0}."),
				min: $.validator.format("Please enter a value greater than or equal to {0}."),
				step: $.validator.format("Please enter a multiple of {0}.")
			});
		})(jQuery);
	</script>

<img src="./Django + React + TS. How to create and consume GraphQL API – apirobot_files/g.gif" alt="" width="6" height="5" id="wpstats"><div class="selectionSharer anim" id="selectionSharerPopover" style="position: absolute; top: 15554.9px; left: 373px; display: none;">  <div id="selectionSharerPopover-inner">    <ul>      <li><a class="action tweet" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" title="Share this selection on Twitter" target="_blank">Tweet</a></li>      <li><a class="action facebook" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" title="Share this selection on Facebook" target="_blank">Facebook</a></li>      <li><a class="action linkedin" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" title="Share this selection on LinkedIn" target="_blank">LinkedIn</a></li>      <li><a class="action email" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" title="Share this selection by email" target="_blank"><svg width="20" height="20"><path stroke="#FFF" stroke-width="6" d="m16,25h82v60H16zl37,37q4,3 8,0l37-37M16,85l30-30m22,0 30,30"></path></svg></a></li>    </ul>  </div>  <div class="selectionSharerPopover-clip"><span class="selectionSharerPopover-arrow"></span></div></div><div id="selectionSharerPopunder" class="selectionSharer">  <div id="selectionSharerPopunder-inner">    <label>Share this selection</label>    <ul>      <li><a class="action tweet" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" title="Share this selection on Twitter" target="_blank">Tweet</a></li>      <li><a class="action facebook" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" title="Share this selection on Facebook" target="_blank">Facebook</a></li>      <li><a class="action linkedin" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" title="Share this selection on LinkedIn" target="_blank">LinkedIn</a></li>      <li><a class="action email" href="https://apirobot.me/posts/django-react-ts-how-to-create-and-consume-graphql-api" title="Share this selection by email" target="_blank"><svg width="20" height="20"><path stroke="#FFF" stroke-width="6" d="m16,25h82v60H16zl37,37q4,3 8,0l37-37M16,85l30-30m22,0 30,30"></path></svg></a></li>    </ul>  </div></div></body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>